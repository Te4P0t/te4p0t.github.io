---
layout: post
title: çº¿æ€§dpã€èƒŒåŒ…é—®é¢˜ã€åŒºé—´dp
subheading: åŠ¨æ€è§„åˆ’1
author: te4p0t
categories: coding
tags: Coding

---



# åŠ¨æ€è§„åˆ’ï¼šçº¿æ€§dpã€èƒŒåŒ…é—®é¢˜ã€åŒºé—´dp

### bitsetä½¿ç”¨

bitsetå¸¸ç”¨æ„é€ å‡½æ•°æœ‰å››ç§ï¼Œå¦‚ä¸‹

```cpp
    bitset<4> bitset1;ã€€ã€€//æ— å‚æ„é€ ï¼Œé•¿åº¦ä¸ºï¼”ï¼Œé»˜è®¤æ¯ä¸€ä½ä¸ºï¼

    bitset<8> bitset2(12);ã€€ã€€//é•¿åº¦ä¸ºï¼˜ï¼ŒäºŒè¿›åˆ¶ä¿å­˜ï¼Œå‰é¢ç”¨ï¼è¡¥å……

    string s = "100101";
    bitset<10> bitset3(s);ã€€ã€€//é•¿åº¦ä¸º10ï¼Œå‰é¢ç”¨ï¼è¡¥å……

    char s2[] = "10101";
    bitset<13> bitset4(s2);ã€€ã€€//é•¿åº¦ä¸º13ï¼Œå‰é¢ç”¨ï¼è¡¥å……

    cout << bitset1 << endl;ã€€ã€€//0000
    cout << bitset2 << endl;ã€€ã€€//00001100
    cout << bitset3 << endl;ã€€ã€€//0000100101
    cout << bitset4 << endl;ã€€ã€€//0000000010101
```

æ³¨æ„ï¼š

ç”¨å­—ç¬¦ä¸²æ„é€ æ—¶ï¼Œå­—ç¬¦ä¸²åªèƒ½åŒ…å« '0' æˆ– '1' ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚

æ„é€ æ—¶ï¼Œéœ€åœ¨<>ä¸­è¡¨æ˜bitset çš„å¤§å°(å³size)ã€‚

åœ¨è¿›è¡Œæœ‰å‚æ„é€ æ—¶ï¼Œè‹¥å‚æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ¯”bitsetçš„sizeå°ï¼Œåˆ™åœ¨å‰é¢ç”¨ï¼è¡¥å……(å¦‚ä¸Šé¢çš„æ —å­)ï¼›è‹¥æ¯”bitsizeå¤§ï¼Œå‚æ•°ä¸ºæ•´æ•°æ—¶å–åé¢éƒ¨åˆ†ï¼Œå‚æ•°ä¸ºå­—ç¬¦ä¸²æ—¶å–å‰é¢éƒ¨åˆ†

bitsetæ”¯æŒä½æ“ä½œç¬¦è¿ç®—å’Œæ•°ç»„ä¸‹æ ‡è®¿é—®ï¼Œåº•å±‚ä½¿ç”¨intå®ç°ã€‚

```cpp
    bitset<8> foo ("10011011");

    cout << foo.count() << endl;ã€€ã€€//5ã€€ã€€ï¼ˆcountå‡½æ•°ç”¨æ¥æ±‚bitsetä¸­1çš„ä½æ•°ï¼Œfoo***æœ‰ï¼•ä¸ªï¼‘
    cout << foo.size() << endl;ã€€ã€€ //8ã€€ã€€ï¼ˆsizeå‡½æ•°ç”¨æ¥æ±‚bitsetçš„å¤§å°ï¼Œä¸€å…±æœ‰ï¼˜ä½

    cout << foo.test(0) << endl;ã€€ã€€//trueã€€ã€€ï¼ˆtestå‡½æ•°ç”¨æ¥æŸ¥ä¸‹æ ‡å¤„çš„å…ƒç´ æ˜¯ï¼è¿˜æ˜¯ï¼‘ï¼Œå¹¶è¿”å›falseæˆ–trueï¼Œæ­¤å¤„foo[0]ä¸ºï¼‘ï¼Œè¿”å›true
    cout << foo.test(2) << endl;ã€€ã€€//falseã€€ã€€ï¼ˆåŒç†ï¼Œfoo[2]ä¸ºï¼ï¼Œè¿”å›false

    cout << foo.any() << endl;ã€€ã€€//trueã€€ã€€ï¼ˆanyå‡½æ•°æ£€æŸ¥bitsetä¸­æ˜¯å¦æœ‰ï¼‘
    cout << foo.none() << endl;ã€€ã€€//falseã€€ã€€ï¼ˆnoneå‡½æ•°æ£€æŸ¥bitsetä¸­æ˜¯å¦æ²¡æœ‰ï¼‘
    cout << foo.all() << endl;ã€€ã€€//falseã€€ã€€ï¼ˆallå‡½æ•°æ£€æŸ¥bitsetä¸­æ˜¯å…¨éƒ¨ä¸ºï¼‘

    cout << foo.flip(2) << endl;ã€€ã€€//10011111ã€€ã€€ï¼ˆflipå‡½æ•°ä¼ å‚æ•°æ—¶ï¼Œç”¨äºå°†å‚æ•°ä½å–åï¼Œæœ¬è¡Œä»£ç å°†fooä¸‹æ ‡ï¼’å¤„"åè½¬"ï¼Œå³ï¼å˜ï¼‘ï¼Œï¼‘å˜ï¼
    cout << foo.flip() << endl;ã€€ã€€ //01100000ã€€ã€€ï¼ˆflipå‡½æ•°ä¸æŒ‡å®šå‚æ•°æ—¶ï¼Œå°†bitsetæ¯ä¸€ä½å…¨éƒ¨å–å

    cout << foo.set() << endl;ã€€ã€€ã€€ã€€//11111111ã€€ã€€ï¼ˆsetå‡½æ•°ä¸æŒ‡å®šå‚æ•°æ—¶ï¼Œå°†bitsetçš„æ¯ä¸€ä½å…¨éƒ¨ç½®ä¸ºï¼‘
    cout << foo.set(3,0) << endl;ã€€ã€€//11110111ã€€ã€€ï¼ˆsetå‡½æ•°æŒ‡å®šä¸¤ä½å‚æ•°æ—¶ï¼Œå°†ç¬¬ä¸€å‚æ•°ä½çš„å…ƒç´ ç½®ä¸ºç¬¬äºŒå‚æ•°çš„å€¼ï¼Œæœ¬è¡Œå¯¹fooçš„æ“ä½œç›¸å½“äºfoo[3]=0
    cout << foo.set(3) << endl;ã€€ã€€  //11111111ã€€ã€€ï¼ˆsetå‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ï¼Œå°†å‚æ•°ä¸‹æ ‡å¤„ç½®ä¸ºï¼‘

    cout << foo.reset(4) << endl;ã€€ã€€//11101111ã€€ã€€ï¼ˆresetå‡½æ•°ä¼ ä¸€ä¸ªå‚æ•°æ—¶å°†å‚æ•°ä¸‹æ ‡å¤„ç½®ä¸ºï¼
    cout << foo.reset() << endl;ã€€ã€€ //00000000ã€€ã€€ï¼ˆresetå‡½æ•°ä¸ä¼ å‚æ•°æ—¶å°†bitsetçš„æ¯ä¸€ä½å…¨éƒ¨ç½®ä¸ºï¼



    string s = foo.to_string();ã€€ã€€//å°†bitsetè½¬æ¢æˆstringç±»å‹
    unsigned long a = foo.to_ulong();ã€€ã€€//å°†bitsetè½¬æ¢æˆunsigned longç±»å‹
    unsigned long long b = foo.to_ullong();ã€€ã€€//å°†bitsetè½¬æ¢æˆunsigned long longç±»å‹

    cout << s << endl;ã€€ã€€//10011011
    cout << a << endl;ã€€ã€€//155
    cout << b << endl;ã€€ã€€//155
```

## è®°å¿†åŒ–æœç´¢

é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¸¦æœ‰è®°å¿†çš„æœç´¢

ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æ•°ç»„å°†å·²ç»è®¡ç®—è¿‡çš„ä¸œè¥¿è®°å½•ä¸‹æ¥åœ¨ä¸‹ä¸€æ¬¡è¦ä½¿ç”¨çš„æ—¶å€™ç›´æ¥ç”¨å·²ç»ç®—å‡ºçš„å€¼ï¼Œé¿å…é‡å¤è®¡ç®—ï¼Œå»æ‰é‡å¤çš„æœç´¢æ ‘ã€‚

#### å¾…å®Œæˆ

pojæ•°å­—ä¸‰è§’å½¢

## åŠ¨æ€è§„åˆ’åŸç†

**åˆ†ç±»åŠ æ³•åŸç†**

- åšä¸€ä»¶äº‹ï¼Œå®Œæˆå®ƒå¯ä»¥æœ‰nç±»æ–¹æ³•ï¼Œåœ¨ç¬¬ä¸€ç±»åŠæ³•ä¸­æœ‰$m_1$ç§ä¸åŒçš„æ–¹æ³•ï¼Œåœ¨ç¬¬äºŒç±»åŠæ³•ä¸­æœ‰$m_2$ç§ä¸åŒçš„æ–¹æ³•,...ï¼Œåœ¨ç¬¬nç±»åŠæ³•ä¸­æœ‰$m_n$ç§ä¸åŒçš„æ–¹æ³•ï¼Œé‚£ä¹ˆå®Œæˆè¿™ä»¶äº‹å…±æœ‰$N=m_1+m_2+...+m_n$ç§ä¸åŒçš„æ–¹æ³•ã€‚

**åˆ†æ­¥ä¹˜æ³•åŸç†**

- åšä¸€ä»¶äº‹ï¼Œå®Œæˆå®ƒéœ€è¦åˆ†æˆnä¸ªæ­¥éª¤ï¼Œåšç¬¬ä¸€æ­¥æœ‰$m_1$ç§ä¸åŒçš„æ–¹æ³•ï¼Œåšç¬¬äºŒæ­¥æœ‰$m_2$ç§ä¸åŒçš„æ–¹æ³•,...ï¼Œåšç¬¬næ­¥æœ‰$m_n$ç§ä¸åŒçš„æ–¹æ³•ï¼Œé‚£ä¹ˆå®Œæˆå®ƒè¿™ä»¶äº‹å…±æœ‰$N=m_1 \times m_2 \times ... \times m_n $ç§ä¸åŒçš„æ–¹æ³•ã€‚

**ä¸‹é¢ç»™å‡ºè‹¥å¹²æ¦‚å¿µ**

**åŠ¨è§„**ï¼šåŠ¨æ€è§„åˆ’æ˜¯è§£å†³**å¤šé˜¶æ®µå†³ç­–è¿‡ç¨‹æœ€ä¼˜åŒ–**é—®é¢˜çš„ä¸€ç§æ–¹æ³•

**é˜¶æ®µ**ï¼šæŠŠé—®é¢˜åˆ†æˆå‡ ä¸ªç›¸äº’è”ç³»çš„æœ‰é¡ºåºçš„å‡ ä¸ªç¯èŠ‚ï¼Œè¿™äº›ç¯èŠ‚å³ç§°ä¸ºé˜¶æ®µã€‚

**çŠ¶æ€**ï¼šæŸä¸€é˜¶æ®µçš„**å‡ºå‘ä½ç½®**ç§°ä¸ºçŠ¶æ€ã€‚é€šå¸¸ä¸€ä¸ªé˜¶æ®µåŒ…å«è‹¥å¹²çŠ¶æ€ã€‚

**å†³ç­–**ï¼šä»æŸé˜¶æ®µçš„ä¸€ä¸ªçŠ¶æ€æ¼”å˜åˆ°ä¸‹ä¸€ä¸ªé˜¶æ®µæŸçŠ¶æ€çš„é€‰æ‹©ã€‚

**ç­–ç•¥**ï¼šç”±å¼€å§‹åˆ°ç»ˆç‚¹çš„å…¨è¿‡ç¨‹ä¸­ï¼Œç”±æ¯æ®µå†³ç­–ç»„æˆçš„å†³ç­–åºåˆ—ç§°ä¸ºå…¨è¿‡ç¨‹å†³ç­–ï¼Œç®€ç§°å†³ç­–ã€‚

**çŠ¶æ€è½¬ç§»æ–¹ç¨‹**ï¼šå‰ä¸€é˜¶æ®µçš„ç»ˆç‚¹å°±æ˜¯åä¸€é˜¶æ®µçš„èµ·ç‚¹ï¼Œå‰ä¸€é˜¶æ®µçš„å†³ç­–é€‰æ‹©å¯¼å‡ºäº†åä¸€é˜¶æ®µçš„çŠ¶æ€ï¼Œè¿™ç§å…³ç³»æè¿°äº†ç”±ié˜¶æ®µåˆ°i+1é˜¶æ®µçš„æ¼”å˜è§„å¾‹ï¼Œç§°ä¸ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚

## åŠ¨æ€è§„åˆ’é€‚ç”¨çš„åŸºæœ¬æ¡ä»¶

**å…·æœ‰ç›¸åŒå­é—®é¢˜**

- é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»è¦ä¿è¯è¿™ä¸ªé—®é¢˜èƒ½å¤Ÿåˆ†è§£å‡ºå‡ ä¸ªå­é—®é¢˜ï¼Œå¹¶ä¸”èƒ½å¤Ÿé€šè¿‡è¿™äº›å­é—®é¢˜æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚
- å…¶æ¬¡ï¼Œå°†è¿™äº›å­é—®é¢˜åšä¸ºä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œå®ƒä¹Ÿèƒ½åˆ†è§£ä¸ºç›¸åŒçš„å­é—®é¢˜è¿›è¡Œæ±‚è§£ã€‚
- ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡è®¾æˆ‘ä»¬ä¸€ä¸ªé—®é¢˜è¢«åˆ†è§£ä¸ºäº†Aã€Bã€Cä¸‰ä¸ªéƒ¨åˆ†ï¼Œé‚£ä¹ˆè¿™Aã€Bã€Cåˆ†åˆ«ä¹Ÿèƒ½è¢«åˆ†è§£ä¸ºA' B' C'ä¸‰ä¸ªéƒ¨åˆ†ï¼Œè€Œä¸èƒ½æ˜¯Dã€Eã€Fä¸‰ä¸ªéƒ¨åˆ†ã€‚

**æ»¡è¶³æœ€ä¼˜å­ç»“æ„**

- é—®é¢˜çš„æœ€ä¼˜è§£åŒ…å«ç€å®ƒçš„å­é—®é¢˜çš„æœ€ä¼˜è§£ã€‚å³ä¸ç®¡å‰é¢çš„ç­–ç•¥å¦‚ä½•ï¼Œæ­¤åçš„å†³ç­–å¿…é¡»æ˜¯åŸºäºå½“å‰çŠ¶æ€ï¼ˆç”±ä¸Šä¸€æ¬¡å†³ç­–äº§ç”Ÿï¼‰çš„æœ€ä¼˜å†³ç­–ã€‚

**æ»¡è¶³æ— åæ•ˆæ€§**

- â€œè¿‡å»çš„æ­¥éª¤åªèƒ½é€šè¿‡å½“å‰çŠ¶æ€å½±å“æœªæ¥çš„å‘å±•ï¼Œå½“å‰çš„çŠ¶æ€æ˜¯**å†å²çš„æ€»ç»“**â€ã€‚è¿™æ¡ç‰¹å¾è¯´æ˜**åŠ¨æ€è§„åˆ’åªé€‚ç”¨äºè§£å†³å½“å‰å†³ç­–ä¸è¿‡å»çŠ¶æ€æ— å…³çš„é—®é¢˜**ã€‚çŠ¶æ€ï¼Œå‡ºç°åœ¨ç­–ç•¥ä»»ä½•ä¸€ä¸ªä½ç½®ï¼Œå®ƒçš„åœ°ä½ç›¸åŒï¼Œéƒ½å¯å®æ–½åŒæ ·ç­–ç•¥ï¼Œè¿™å°±æ˜¯æ— åæ•ˆæ€§çš„å†…æ¶µã€‚
- è¿™æ˜¯åŠ¨æ€è§„åˆ’ä¸­æä¸ºé‡è¦çš„ä¸€ç‚¹ï¼Œå¦‚æœå½“å‰é—®é¢˜çš„å…·ä½“å†³ç­–ï¼Œä¼šå¯¹è§£å†³å®ƒæœªæ¥çš„é—®é¢˜äº§ç”Ÿå½±å“ï¼Œå¦‚æœäº§ç”Ÿå½±å“ï¼Œå°±æ— æ³•ä¿è¯å†³ç­–çš„æœ€ä¼˜æ€§ã€‚

## åšåŠ¨æ€è§„åˆ’çš„ä¸€èˆ¬æ­¥éª¤

1. ç»“åˆåŸé—®é¢˜å’Œå­é—®é¢˜ç¡®å®šçŠ¶æ€ï¼ˆæˆ‘æ˜¯è°ï¼Ÿæˆ‘åœ¨å“ªï¼Ÿï¼‰
   - é¢˜ç›®åœ¨æ±‚ä»€ä¹ˆï¼Ÿè¦æ±‚è¿™ä¸ªå€¼æˆ‘ä»¬éœ€è¦çŸ¥é“ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯å½±å“ç­”æ¡ˆçš„å› ç´ ï¼Ÿ
   - ï¼ˆä¸€ç»´çŠ¶æ€æè¿°ä¸å®Œå°±äºŒç»´ï¼ŒäºŒç»´ä¸è¡Œå°±ä¸‰ç»´å››ç»´ï¼‰
   - çŠ¶æ€çš„å‚æ•°ä¸€èˆ¬æœ‰ï¼š
   - æè¿°ä½ç½®çš„ï¼šå‰ï¼ˆåï¼‰iå•ä½ï¼Œç¬¬iåˆ°ç¬¬jå•ä½ï¼Œåæ ‡ä¸ºï¼ˆi, jï¼‰ï¼Œç¬¬iä¸ªä¹‹å‰ï¼ˆåï¼‰ä¸”å¿…é¡»å–ç¬¬iä¸ªç­‰ã€‚
   - æè¿°æ•°é‡çš„ï¼šå–iä¸ªï¼Œä¸è¶…è¿‡iä¸ªï¼Œè‡³å°‘iä¸ªç­‰
   - æè¿°å¯¹åæœ‰å½±å“çš„ï¼šçŠ¶æ€å‹ç¼©çš„ï¼Œä¸€äº›ç‰¹æ®Šçš„æ€§è´¨

2. ç¡®å®šè½¬ç§»æ–¹ç¨‹ï¼ˆæˆ‘ä»å“ªé‡Œæ¥ï¼Ÿæˆ‘åˆ°å“ªé‡Œå»ï¼Ÿï¼‰
   - æ£€æŸ¥å‚æ•°æ˜¯å¦è¶³å¤Ÿ
   - åˆ†æƒ…å†µï¼šæœ€åä¸€æ¬¡æ“ä½œçš„æ–¹å¼ï¼Œå–ä¸å–ï¼Œæ€ä¹ˆæ ·å–â€”â€”å‰ä¸€é¡¹æ˜¯ä»€ä¹ˆ
   - åˆå§‹è¾¹ç•Œæ˜¯ä»€ä¹ˆ
   - æ³¨æ„æ— åæ•ˆæ€§ã€‚æ¯”å¦‚è¯´ï¼Œæ±‚Aè¦æ±‚Bï¼Œæ±‚Bå°±è¦æ±‚Cï¼Œè€Œæ±‚Cå°±è¦æ±‚Aï¼Œè¿™å°±ä¸ç¬¦åˆæ— åæ•ˆæ€§äº†ã€‚

æ ¹æ®çŠ¶æ€**æšä¸¾æœ€åä¸€æ¬¡å†³ç­–**ï¼ˆå³å½“å‰çŠ¶æ€æ€ä¹ˆæ¥çš„ï¼‰å°±å¯ä»¥ç¡®å®šå‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚

3. è€ƒè™‘éœ€ä¸éœ€è¦ä¼˜åŒ–
4. ç¡®å®šç¼–ç¨‹å®ç°æ–¹å¼
   1. é€’æ¨
   2. è®°å¿†åŒ–æœç´¢





## çº¿æ€§dp

### ä¹ é¢˜

#### æ–¹å—ä¸æ”¶çº³ç›’

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1001
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

â€‹    ç°åœ¨æœ‰ä¸€ä¸ªå¤§å°n*1çš„æ”¶çº³ç›’ï¼Œæˆ‘ä»¬æ‰‹é‡Œæœ‰æ— æ•°ä¸ªå¤§å°ä¸º1*1å’Œ2*1çš„å°æ–¹å—ï¼Œæˆ‘ä»¬éœ€è¦ç”¨è¿™äº›æ–¹å—å¡«æ»¡æ”¶çº³ç›’ï¼Œè¯·é—®æˆ‘ä»¬æœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•å¡«æ»¡è¿™ä¸ªæ”¶çº³ç›’ 

**è¾“å…¥æè¿°**:

```
ç¬¬ä¸€è¡Œæ˜¯æ ·ä¾‹æ•°T
ç¬¬2åˆ°2+T-1è¡Œæ¯è¡Œæœ‰ä¸€ä¸ªæ•´æ•°nï¼ˆn<=80ï¼‰ï¼Œæè¿°æ¯ä¸ªæ ·ä¾‹ä¸­çš„nã€‚
```

**è¾“å‡ºæè¿°**:

```
å¯¹äºæ¯ä¸ªæ ·ä¾‹è¾“å‡ºå¯¹åº”çš„æ–¹æ³•æ•°
```

**æ€æƒ³&ä»£ç **

```c++
#include<bits/stdc++.h>
using namespace std;

long long dp[100];
int T, n;

long long getans(int i)
{
	if(dp[i]!=-1) return dp[i];
	dp[i] = getans(i-1) + getans(i-2);
	return dp[i];
}

int main()
{
	scanf("%d", &T);
	memset(dp, -1, sizeof(dp));
	dp[1] = 1;
	dp[2] = 2;
	getans(80);
	while(T--)
	{
		scanf("%d", &n);
		printf("%lld\n", dp[n]);
	}
	return 0;
}
```

#### èˆ”ç‹—èˆ”åˆ°æœ€åä¸€æ— æ‰€æœ‰

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1002
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

ä½œä¸ºé˜Ÿä¼çš„æ ¸å¿ƒï¼Œforever97å¾ˆå—å¦å¤–ä¸¤ä¸ªé˜Ÿå‹çš„å°Šæ•¬ã€‚
 Trote_wæ¯å¤©éƒ½è¦è¯·forever97åƒå¤–å–ï¼Œä½†å¾ˆä¸å¹¸çš„æ˜¯å®‡å®™ä¸­å¿ƒforever97æ‰€åœ¨çš„å­¦æ ¡å‘¨å›´åªæœ‰3å®¶forever97çˆ±åƒçš„å¤–å–ã€‚
 å¦‚æœTrote_wç»™forever97ä¹°äº†åˆ«å®¶çš„å¤–å–ï¼Œforever97å°±ä¼šå¤§å–Šâ€œæˆ‘ä¸åƒæˆ‘ä¸åƒâ€ã€‚
 ä½†æ˜¯forever97åˆä¸å–œæ¬¢è¿ç»­ä¸‰å¤©åƒä¸€ç§å¤–å–ã€‚
 å¦‚æœTrote_wå“ªå¤©å¿˜äº†è¿™ä»¶äº‹å¹¶ä¸”ä¸‰å¤©ç»™ä»–ä¹°äº†åŒä¸€å®¶å¤–å–ï¼Œé‚£ä¹ˆforever97å°±ä¼šæŠŠTrote_wçš„å¤´æ‘è¿›æ‰‹æœºå±å¹•é‡Œã€‚
 ä½œä¸ºTrote_wçš„å¥½æœ‹å‹ï¼Œä½ èƒ½å‘Šè¯‰ä»–è¿ç»­è¯·forever97åƒnå¤©é¥­ï¼Œæœ‰å¤šå°‘ä¸åŒçš„è´­ä¹°æ–¹æ³•å—ï¼Ÿ

**è¾“å…¥æè¿°**:

```
å¤šç»„æ ·ä¾‹
ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°T(1<=T<=20)ä»£è¡¨æµ‹è¯•æ ·ä¾‹æ•°
æ¥ä¸‹æ¥tè¡Œæ¯è¡Œä¸€ä¸ªæ•´æ•°nï¼Œä»£è¡¨Trote_wè¦è¯·forever97åƒnå¤©é¥­(1<=n<=100000)
```

**è¾“å‡ºæè¿°**:

```
è¾“å‡ºTä¸ªæ•´æ•°ä»£è¡¨æ–¹æ¡ˆæ•°ï¼Œç”±äºç­”æ¡ˆå¤ªå¤§ï¼Œä½ åªéœ€è¦è¾“å‡ºmod 1e9+7 åçš„ç­”æ¡ˆå³å¯ã€‚
```

**æ€æƒ³&ä»£ç **

ç”¨dp\[i\]\[j\]è¡¨ç¤ºç¬¬iå¤©ç‚¹äº†jå·åº—å¤–å–çš„æƒ…å†µã€‚

é‚£ä¹ˆå¯ä»¥å¾—åˆ°é€’æ¨å¼

$dp[i][0] = (dp[i-1][1] + dp[i-1][2] + dp[i-2][1] + dp[i-2][2])$

å…¶ä¸­å‰ä¸¤é¡¹çš„å‰ä¸€å¤©åº—å·å’Œå½“å‰å¤©åº—å·ä¸åŒï¼Œå› æ­¤ä¸ä¼šå‡ºç°è¿ç»­ä¸‰å¤©ç›¸åŒçš„æƒ…å†µã€‚

åä¸¤é¡¹æ˜¯ç¬¬i-1å¤©ä¸ç¬¬iå¤©åº—å·ç›¸åŒçš„æƒ…å†µï¼Œé‚£ä¹ˆåªéœ€è¦ä¿è¯i-2å¤©ä¸æ˜¯åŒä¸€å®¶åº—å³å¯ã€‚

dp\[i\]\[1\]å’Œdp\[i\]\[2\]åŒç†ã€‚

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn = 1e5+100;
const int mod = 1e9+7;

long long dp[maxn][3];
int T;
int n;

int main()
{
	dp[1][0] = 1;
	dp[1][1] = 1;
	dp[1][2] = 1;
	dp[2][0] = 3;
	dp[2][1] = 3;
	dp[2][2] = 3;
	scanf("%d", &T);
	//cacl(100010, 0);
	for(int i=3;i<=100000;i++)
	{
		dp[i][0] = (dp[i-1][1] + dp[i-1][2] + dp[i-2][1] + dp[i-2][2]) % mod;
		dp[i][1] = (dp[i-1][0] + dp[i-1][2] + dp[i-2][0] + dp[i-2][2]) % mod;
		dp[i][2] = (dp[i-1][0] + dp[i-1][1] + dp[i-2][0] + dp[i-2][1]) % mod;
	}
	while(T--)
	{
		scanf("%d", &n);
		printf("%d\n", (dp[n][0] + dp[n][1] + dp[n][2])%mod);
	}
	return 0;
}
```

å¦‚æœé‡‡ç”¨é€’å½’çš„æ–¹æ³•ä¼šçˆ†æ ˆ

éœ€è¦å¾ªç¯é€’å½’

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn = 1e5+101;
const int mod = 1e9+7;

int dp[maxn][3];
int T;
int n;

int cacl(int x, int y)
{
	if(dp[x][y] != -1) return dp[x][y];
	int ans = 0;
	for(int i=x-2;i<x;i++)
	{
		for(int j=0;j<3;j++)
		{
			dp[x][y] += cacl(i, j);
			dp[x][y] %= mod;
		}
	}
	dp[x][y] += 1;
	dp[x][y] -= (cacl(x-1, y) + cacl(x-2, y));
	while(dp[x][y]<0) dp[x][y] += mod;
	return dp[x][y];
}

int main()
{
	memset(dp, -1, sizeof(dp));
	dp[1][0] = 1;
	dp[1][1] = 1;
	dp[1][2] = 1;
	dp[2][0] = 3;
	dp[2][1] = 3;
	dp[2][2] = 3;
	scanf("%d", &T);
	for(int i=1;i<=1001;i++)
		cacl(100*i, 0);
	while(T--)
	{
		scanf("%d", &n);
		printf("%d\n", ((dp[n][0] + dp[n][1]) % mod + dp[n][2]) % mod);
	}
	return 0;
}
```

è€ƒè™‘é€’æ¨å¼çš„å½¢å¼ï¼Œå¹¶ä¸”3ä¸ªåº—å…·æœ‰ç­‰æ•ˆæ€§ã€‚

å¯ä»¥å°†dpé™ä½åˆ°ä¸€ç»´

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn = 1e5+101;
const int mod = 1e9+7;

int dp[maxn];
int T;
int n;


int main()
{
	memset(dp, -1, sizeof(dp));
	dp[1] = 3;
	dp[2] = 9;
	for(int i=3;i<=100000;i++)
	{
		dp[i] = (2 * dp[i-1] % mod + 2 * dp[i-2] % mod) % mod;
	}
	scanf("%d", &T);
	while(T--)
	{
		scanf("%d", &n);
		printf("%d\n", dp[n]);
	}
	return 0;
}
```

é€’æ¨

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn = 1e5+101;
const int mod = 1e9+7;

int dp[maxn];
int T;
int n;

int cacl(int x)
{
	if(dp[x]) return dp[x];
	dp[x] = (2 * cacl(x-1) % mod + 2 * cacl(x-2) % mod) % mod;
	return dp[x];
}

int main()
{
	memset(dp, 0, sizeof(dp));
	dp[1] = 3;
	dp[2] = 9;
	for(int i=1;i<=1000;i++) cacl(100*i);
	scanf("%d", &T);
	while(T--)
	{
		scanf("%d", &n);
		printf("%d\n", dp[n]);
	}
	return 0;
}
```

#### å¯çˆ±ã®æ˜Ÿç©º

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1003
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

  â€œå½“ä½ çœ‹å‘å¥¹æ—¶ï¼Œæœ‰ç»†ç¢æ˜Ÿè¾°è½å…¥ä½ çš„çœ¼ç›ï¼ŒçœŸå¥½ã€‚â€â€”â€”å°å¯çˆ± 

  åœ¨ä¸€ä¸ªç¹æ˜Ÿé—ªçƒçš„å¤œæ™šï¼Œå¿å¿µå’Œæ¸…å®‡ä¸€èµ·èººåœ¨éƒŠå¤–çš„è‰åœ°ä¸Šï¼Œä»°æœ›æ˜Ÿç©ºã€‚ 

  æ˜Ÿè¯­å¿ƒæ„¿ï¼Œä»–ä»¬ï¼Œæƒ³æŠŠè¿™ç‰‡æ˜Ÿç©ºçš„æ˜Ÿæ˜Ÿï¼Œè¿æˆä¸€æ£µæ¼‚äº®çš„æ ‘ï¼Œå°†è¿™ç¾å¥½çš„æ™¯è‰²è®°å½•ä¸‹æ¥ã€‚ 

  ç°åœ¨ï¼Œå¤©ä¸Šå…±æœ‰né¢—æ˜Ÿæ˜Ÿï¼Œç¼–å·åˆ†åˆ«ä¸º1,2.....nï¼Œä¸€å¼€å§‹ä»»ä½•ä¸¤ä¸ªç‚¹ä¹‹é—´éƒ½æ²¡æœ‰è¾¹è¿æ¥ã€‚  

  ä¹‹åï¼Œä»–ä»¬ä¸¤ä¸ªæƒ³åœ¨åœ¨(u,v)ä¹‹é—´è¿æ— å‘è¾¹ï¼Œéœ€è¦ä»˜å‡º|uè”é€šå—å¤§å°-vè”é€šå—å¤§å°|çš„ä»£ä»·ã€‚ 

  ä»–ä»¬ä¸¤ä¸ªæƒ³ç”¨æœ€å°‘çš„ä»£ä»·æ¥ä½¿è¿™nä¸ªç‚¹è”é€šï¼Œæ‰€ä»¥ä»–ä»¬æƒ³çŸ¥é“æœ€å°ä»£ä»·æ˜¯å¤šå°‘ã€‚ 

  (å¤šç»„æ•°æ® 

**è¾“å…¥æè¿°**:

```
ç¬¬ä¸€è¡Œä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºæ•°æ®ç»„æ•°T

æ¥ä¸‹æ¥Tè¡Œæ¯è¡Œä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºè¯¢é—®çš„n
```

**è¾“å‡ºæè¿°**:

```
Tè¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•°è¡¨ç¤ºç­”æ¡ˆ
```

**æ€æƒ³&ä»£ç **

å¯¹äºnç»“ç‚¹ï¼Œæœ€å°çš„è¿é€šä»£ä»·æ˜¯è¿é€šn/2å’Œn/2+n%2ä¸¤ä¸ªåˆ†é‡ã€‚

è§‚å¯Ÿé¢˜ç›®å¹¶åˆ—ä¸¾éªŒè¯å‰å‡ é¡¹ï¼Œå¯ä»¥å‘ç°é€’æ¨å¼

$dp[i]  = dp[i] + dp[i/2 + i\%2] + i\%2$

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn = 1e5+10;
long long T, n;
long long dp[maxn];

long long cacl(long long n)
{
	if(n<=1e5) return dp[n];
	else return cacl(n/2) + cacl(n/2 + (n&1)) + (n&1);
}

int main()
{
	scanf("%lld", &T);
    dp[0] = 0;
	dp[1] = 0;
	dp[2] = 0;
	for(int i=3;i<=maxn-1;i++)
	{
		dp[i] = dp[i/2] + dp[i/2 + (i&1)] + (i&1);
	}
	while(T--)
	{
		scanf("%lld", &n);
		if(n<=1e5) printf("%lld\n", dp[n]);
		else printf("%lld\n", cacl(n));
	}
	return 0;
}
```

å¦‚æœç”¨i&1ä»£æ›¿i%2ï¼Œä¸€å®šæ³¨æ„è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼Œi&1è¦åŠ ä¸Šæ‹¬å·ã€‚

#### èŠ±åº—æ©±çª—

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1005
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

  å°qå’Œä»–çš„è€å©†å°zæœ€è¿‘å¼€äº†ä¸€å®¶èŠ±åº—ï¼Œä»–ä»¬å‡†å¤‡æŠŠåº—é‡Œæœ€å¥½çœ‹çš„èŠ±éƒ½æ‘†åœ¨æ©±çª—é‡Œã€‚ 

  ä½†æ˜¯ä»–ä»¬æœ‰å¾ˆå¤šèŠ±ç“¶ï¼Œæ¯ä¸ªèŠ±ç“¶éƒ½å…·æœ‰å„è‡ªçš„ç‰¹ç‚¹ï¼Œå› æ­¤ï¼Œå½“å„ä¸ªèŠ±ç“¶ä¸­æ”¾å…¥ä¸åŒçš„èŠ±æŸæ—¶ï¼Œä¼šäº§ç”Ÿä¸åŒçš„ç¾å­¦æ•ˆæœã€‚ 

  ä¸ºäº†ä½¿æ©±çª—é‡Œçš„èŠ±æ‘†æ”¾çš„æœ€åˆé€‚ï¼Œä»–ä»¬å¾—æƒ³ä¸ªåŠæ³•å®‰æ’æ¯ç§èŠ±çš„æ‘†æ”¾ä½ç½®ã€‚ 

  å¯æ˜¯å› ä¸ºå°qå’Œå°zæ¯å¤©éƒ½å¤ªå¿™ï¼Œæ²¡æœ‰æ—¶é—´è®¾è®¡æ©±çª—é‡ŒèŠ±çš„æ‘†æ³•ï¼Œæ‰€ä»¥ä»–ä»¬æƒ³è®©ä½ å¸®ä»–ä»¬æ±‚å‡ºèŠ±æ‘†æ”¾çš„æœ€å¤§ç¾è§‚ç¨‹åº¦å’Œæ¯ç§èŠ±æ‰€æ”¾çš„ä½ç½®ã€‚ 

  æ¯ç§èŠ±éƒ½æœ‰ä¸€ä¸ªæ ‡è¯†ï¼Œå‡è®¾æœé¹ƒèŠ±çš„æ ‡è¯†æ•°ä¸º1ï¼Œç§‹æµ·æ£ çš„æ ‡è¯†æ•°ä¸º2ï¼Œåº·ä¹ƒé¦¨çš„æ ‡è¯†æ•°ä¸º3ï¼Œæ‰€æœ‰çš„èŠ±æŸåœ¨æ”¾å…¥èŠ±ç“¶æ—¶å¿…é¡»ä¿æŒå…¶æ ‡è¯†æ•°çš„é¡ºåºï¼Œå³ï¼š 

  æœé¹ƒèŠ±å¿…é¡»æ”¾åœ¨ç§‹æµ·æ£ å·¦è¾¹çš„èŠ±ç“¶ä¸­ï¼Œç§‹æµ·æ£ å¿…é¡»æ”¾åœ¨åº·ä¹ƒé¦¨å·¦è¾¹çš„èŠ±ç“¶ä¸­ã€‚ 

  å¦‚æœèŠ±ç“¶çš„æ•°ç›®å¤§äºèŠ±æŸçš„æ•°ç›®ã€‚åˆ™å¤šä½™çš„èŠ±ç“¶å¿…é¡»ç©ºç½®ï¼Œä¸”æ¯ä¸ªèŠ±ç“¶ä¸­åªèƒ½æ”¾ä¸€æŸèŠ±ã€‚ 

  æ¯ç§èŠ±æ”¾åœ¨ä¸åŒçš„ç“¶å­é‡Œä¼šäº§ç”Ÿä¸åŒçš„ç¾è§‚ç¨‹åº¦ï¼Œç¾è§‚ç¨‹åº¦å¯èƒ½æ˜¯æ­£æ•°ä¹Ÿå¯èƒ½æ˜¯è´Ÿæ•°ã€‚ 

  ä¸Šè¿°ä¾‹å­ä¸­ï¼ŒèŠ±ç“¶ä¸èŠ±æŸçš„ä¸åŒæ­é…æ‰€å…·æœ‰çš„ç¾è§‚ç¨‹åº¦ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š 

```
èŠ±    ç“¶
                  1     2    3    4    5
   1 (æœé¹ƒèŠ±)     7    23   -5  -24   16
   2 (ç§‹æµ·æ£ )     5    21   -4   10   23
   3 (åº·ä¹ƒé¦¨)    -21    5   -4  -20   20
```

  æ ¹æ®ä¸Šè¡¨ï¼Œæœé¹ƒèŠ±æ”¾åœ¨èŠ±ç“¶2ä¸­ï¼Œä¼šæ˜¾å¾—éå¸¸å¥½çœ‹ï¼›ä½†è‹¥æ”¾åœ¨èŠ±ç“¶4ä¸­åˆ™æ˜¾å¾—ååˆ†éš¾çœ‹ã€‚ 

  ä¸ºå–å¾—æœ€å¤§ç¾è§‚ç¨‹åº¦ï¼Œä½ å¿…é¡»åœ¨ä¿æŒèŠ±æŸé¡ºåºçš„å‰æä¸‹ï¼Œä½¿èŠ±æŸçš„æ‘†æ”¾å–å¾—æœ€å¤§çš„ç¾å­¦å€¼ï¼Œå¹¶æ±‚å‡ºæ¯ç§èŠ±åº”è¯¥æ‘†æ”¾çš„èŠ±ç“¶çš„ç¼–å·ã€‚ 

**è¾“å…¥æè¿°**:

```
ç¬¬1è¡Œï¼šä¸¤ä¸ªæ•´æ•°Få’ŒVï¼Œè¡¨ç¤ºå…±æœ‰Fç§èŠ±ï¼ŒVä¸ªèŠ±ç“¶ã€‚
ç¬¬2è¡Œåˆ°ç¬¬F+1è¡Œï¼šæ¯è¡Œæœ‰Vä¸ªæ•°ï¼Œè¡¨ç¤ºèŠ±æ‘†æ”¾åœ¨ä¸åŒèŠ±ç“¶é‡Œçš„ç¾è§‚ç¨‹åº¦å€¼valueã€‚(ç¾è§‚ç¨‹åº¦å’Œå°äº2312^{31}231ï¼Œç¾è§‚ç¨‹åº¦æœ‰æ­£æœ‰è´Ÿ)
```

**è¾“å‡ºæè¿°**:

```
è¾“å‡ºæœ‰ä¸¤è¡Œï¼šç¬¬ä¸€è¡Œä¸ºè¾“å‡ºæœ€å¤§ç¾è§‚ç¨‹åº¦å’Œçš„å€¼ï¼Œç¬¬äºŒè¡Œæœ‰Fä¸ªæ•°è¡¨ç¤ºæ¯æœµèŠ±åº”è¯¥æ‘†æ”¾çš„èŠ±ç“¶çš„ç¼–å·ã€‚
è‹¥æœ‰å¤šç§æ–¹æ¡ˆï¼Œè¾“å‡ºå­—å…¸åºè¾ƒå°çš„æ–¹æ¡ˆï¼ˆç¾è§‚ç¨‹åº¦ä¸å˜çš„æƒ…å†µä¸‹ï¼ŒèŠ±å°½é‡å¾€å‰æ”¾ï¼‰ã€‚
```

**æ€æƒ³&ä»£ç **

è®¾$dp[i][j]$è¡¨ç¤ºç¬¬iä¸ªèŠ±æ”¾åœ¨ç¬¬jä¸ªèŠ±ç“¶ä¸­çš„çŠ¶æ€ã€‚

é‚£ä¹ˆå¯ä»¥å¾—åˆ°çŠ¶æ€è½¬ç§»æ–¹ç¨‹$dp[i][j] = max(dp[i][k]) + value[i][j]$ã€‚å…¶ä¸­ï¼Œ$i-1 \le k \le j-1$

æ³¨æ„ï¼š

1. dpè¿‡ç¨‹ä¸­jçš„ä¸Šé™ã€‚
2. ansåªåœ¨ä¸€ç»´æœ€å¤§å€¼ä¸­å–ã€‚

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn = 110;
long long value[maxn][maxn];
long long dp[maxn][maxn];
int F, V;
long long ans = 0xf0f0f0f0f0f0f0f0;
int pos[maxn];

int main()
{
	scanf("%d%d", &F, &V);
	for(int i=1;i<=F;i++)
	{
		for(int j=1;j<=V;j++)
		{
			scanf("%lld", &value[i][j]);
		}
	}
	for(int i=1;i<=F;i++)
		for(int j=1;j<=V;j++) dp[i][j] = 0xf0f0f0f0f0f0f0f0;
	for(int i=1;i<=F;i++)
	{
		for(int j=i;j<=V-(F-i);j++)
		{
			for(int k=i-1;k<j;k++)
			{
				dp[i][j] = max(dp[i][j], dp[i-1][k] + value[i][j]);
			}
		}
	}
	for(int j=1;j<=V;j++) ans = max(ans, dp[F][j]);
	printf("%lld\n", ans);
	long long tmp = ans;
	for(int i=F;i>0;i--)
	{
		for(int j=i;j<=V-(F-i);j++)
		{
			if(dp[i][j] == tmp)
			{
				tmp -= value[i][j];
				pos[i] = j;
				break;
			}
		}
	}
	for(int i=1;i<=F;i++) printf("%d ", pos[i]);
	return 0;
}
```

#### è¿‡æ²³å’

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1008
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

  å¦‚å›¾ï¼ŒA ç‚¹æœ‰ä¸€ä¸ªè¿‡æ²³å’ï¼Œéœ€è¦èµ°åˆ°ç›®æ ‡ B        ç‚¹ã€‚å’è¡Œèµ°è§„åˆ™ï¼šå¯ä»¥å‘ä¸‹ã€æˆ–è€…å‘å³ã€‚åŒæ—¶åœ¨æ£‹ç›˜ä¸Šçš„ä»»ä¸€ç‚¹æœ‰ä¸€ä¸ªå¯¹æ–¹çš„é©¬ï¼ˆå¦‚ä¸Šå›¾çš„Cç‚¹ï¼‰ï¼Œè¯¥é©¬æ‰€åœ¨çš„ç‚¹å’Œæ‰€æœ‰è·³è·ƒä¸€æ­¥å¯è¾¾çš„ç‚¹ç§°ä¸ºå¯¹æ–¹é©¬çš„æ§åˆ¶ç‚¹ã€‚ä¾‹å¦‚ä¸Šå›¾        C ç‚¹ä¸Šçš„é©¬å¯ä»¥æ§åˆ¶ 9 ä¸ªç‚¹ï¼ˆå›¾ä¸­çš„P1ï¼ŒP2 â€¦ P8 å’Œ Cï¼‰ã€‚å’ä¸èƒ½é€šè¿‡å¯¹æ–¹é©¬çš„æ§åˆ¶ç‚¹ã€‚ 

  ![img](https://te4p0t.github.io/assets/images/typora-user-images/202204262300023.gif)  

  æ£‹ç›˜ç”¨åæ ‡è¡¨ç¤ºï¼ŒA ç‚¹ï¼ˆ0,0ï¼‰ã€B ç‚¹ï¼ˆn,mï¼‰(n,m ä¸ºä¸è¶…è¿‡ 20        çš„æ•´æ•°ï¼Œå¹¶ç”±é”®ç›˜è¾“å…¥)ï¼ŒåŒæ ·é©¬çš„ä½ç½®åæ ‡æ˜¯éœ€è¦ç»™å‡ºçš„ï¼ˆçº¦å®š: C<>Aï¼ŒåŒæ—¶C<>Bï¼‰ã€‚ç°åœ¨è¦æ±‚ä½ è®¡ç®—å‡ºå’ä» A ç‚¹èƒ½å¤Ÿåˆ°è¾¾        B ç‚¹çš„è·¯å¾„çš„æ¡æ•°ã€‚
 **è¾“å…¥æè¿°**:

```
è¾“å…¥Bç‚¹çš„åæ ‡ï¼ˆn,mï¼‰ä»¥åŠå¯¹æ–¹é©¬çš„åæ ‡ï¼ˆX,Yï¼‰{ä¸ç”¨åˆ¤é”™}
```

**è¾“å‡ºæè¿°**:

```
è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼ˆè·¯å¾„çš„æ¡æ•°ï¼‰ã€‚
```

**æ€æƒ³&ä»£ç **

$dp[i][j] = dp[i-1][j] + dp[i][j-1]$

ğŸçš„ç«åŠ›è¦†ç›–èŒƒå›´æ‰‹åŠ¨èµ‹0

tips:

- è¦å¼€long long
- å·¦ä¾§å’Œä¸Šä¾§è¾¹ç•Œä¸èƒ½åˆå§‹åŒ–èµ‹å€¼1ï¼Œå› ä¸ºè‹¥è¾¹ç•Œå­˜åœ¨ç‚¹åœ¨ğŸçš„ç«åŠ›èŒƒå›´å†…ï¼Œåç»§ç‚¹æ–¹æ¡ˆæ•°å‡ä¸º0ã€‚

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn = 30;
int n, m, x, y;
long long dp[maxn][maxn];
int dir[8][2] = {1, 2, -1, 2, 1, -2, -1, -2, 2, 1, 2, -1, -2, 1, -2, -1};

bool inmap(int x, int y)
{
	return x>=1 && x<=n+1 && y>=1 && y<=m+1;
}

long long getans(int x, int y)
{
	if(dp[x][y]>=0) return dp[x][y];
	dp[x][y] = getans(x-1, y) + getans(x, y-1);
	return dp[x][y];
}

int main()
{
	memset(dp, -1, sizeof(dp));
	scanf("%d%d%d%d", &n, &m, &x, &y);
	for(int i=0;i<=m+1;i++) dp[0][i] = 0;
	for(int j=0;j<=n+1;j++) dp[j][0] = 0;
	dp[1][1] = 1;
	for(int i=0;i<8;i++)
		if(inmap(x+1+dir[i][0], y+1+dir[i][1]))
			dp[x+1+dir[i][0]][y+1+dir[i][1]] = 0;
	dp[x+1][y+1] = 0;
	printf("%lld", getans(n+1, m+1));
	// cout << endl;
	// for(int i=0;i<=n+1;i++)
	// {
		// for(int j=0;j<=m+1;j++)
		// {
			// printf("%4lld", dp[i][j]);
		// }
		// cout <<endl;
	// }
	return 0;
}
```

#### ä¼ çƒæ¸¸æˆ

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1009
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

ä¸Šä½“è‚²è¯¾çš„æ—¶å€™ï¼Œå°è›®çš„è€å¸ˆç»å¸¸å¸¦ç€åŒå­¦ä»¬ä¸€èµ·åšæ¸¸æˆã€‚è¿™æ¬¡ï¼Œè€å¸ˆå¸¦ç€åŒå­¦ä»¬ä¸€èµ·åšä¼ çƒæ¸¸æˆã€‚
 æ¸¸æˆè§„åˆ™æ˜¯è¿™æ ·çš„ï¼šnä¸ªåŒå­¦ç«™æˆä¸€ä¸ªåœ†åœˆï¼Œå…¶ä¸­çš„ä¸€ä¸ªåŒå­¦æ‰‹é‡Œæ‹¿ç€ä¸€ä¸ªçƒï¼Œå½“è€å¸ˆå¹å“¨å­æ—¶å¼€å§‹ä¼ çƒï¼Œæ¯ä¸ªåŒå­¦å¯ä»¥æŠŠçƒä¼ ç»™è‡ªå·±å·¦å³çš„ä¸¤ä¸ªåŒå­¦ä¸­çš„ä¸€ä¸ªï¼ˆå·¦å³ä»»æ„ï¼‰ï¼Œå½“è€å¸ˆå†æ¬¡å¹å“¨å­æ—¶ï¼Œä¼ çƒåœæ­¢ï¼Œæ­¤æ—¶ï¼Œæ‹¿ç€çƒæ²¡ä¼ å‡ºå»çš„é‚£ä¸ªåŒå­¦å°±æ˜¯è´¥è€…ï¼Œè¦ç»™å¤§å®¶è¡¨æ¼”ä¸€ä¸ªèŠ‚ç›®ã€‚
 èªæ˜çš„å°è›®æå‡ºä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼šæœ‰å¤šå°‘ç§ä¸åŒçš„ä¼ çƒæ–¹æ³•å¯ä»¥ä½¿å¾—ä»å°è›®æ‰‹é‡Œå¼€å§‹ä¼ çš„çƒï¼Œä¼ äº†mæ¬¡ä»¥åï¼Œåˆå›åˆ°å°è›®æ‰‹é‡Œã€‚ä¸¤ç§ä¼ çƒçš„æ–¹æ³•è¢«è§†ä½œä¸åŒçš„æ–¹æ³•ï¼Œå½“ä¸”ä»…å½“è¿™ä¸¤ç§æ–¹æ³•ä¸­ï¼Œæ¥åˆ°çƒçš„åŒå­¦æŒ‰æ¥çƒé¡ºåºç»„æˆçš„åºåˆ—æ˜¯ä¸åŒçš„ã€‚æ¯”å¦‚æœ‰3ä¸ªåŒå­¦1å·ã€2å·ã€3å·ï¼Œå¹¶å‡è®¾å°è›®ä¸º1å·ï¼Œçƒä¼ äº†3æ¬¡å›åˆ°å°è›®æ‰‹é‡Œçš„æ–¹å¼æœ‰1->2->3->1å’Œ1->3->2->1ï¼Œå…±2ç§ã€‚

**è¾“å…¥æè¿°**:

```
å…±ä¸€è¡Œï¼Œæœ‰ä¸¤ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•´æ•°nï¼Œmï¼ˆ 3 â‰¤ n â‰¤ 30ï¼Œ1 â‰¤ m â‰¤ 30 ï¼‰ã€‚
```

**è¾“å‡ºæè¿°**:

```
å…±ä¸€è¡Œï¼Œæœ‰ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºç¬¦åˆé¢˜æ„çš„æ–¹æ³•æ•°ã€‚
```

**æ€æƒ³&ä»£ç **

$dp[i][j]$è¡¨ç¤ºç¬¬iæ¬¡çƒä¼ åˆ°ç¬¬jäººæ‰‹ä¸­çš„æ–¹æ¡ˆæ•°

$dp[i][j] = dp[i-1][j-1] + dp[i-1][j+1]$ï¼Œæ³¨æ„jåœ¨è¾¹ç•Œæ—¶ç‰¹åˆ¤j-1å’Œj+1ã€‚

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn = 35;
long long dp[maxn][maxn];
int vis[maxn][maxn];
int n, m;

long long getans(int x, int y)
{
	//cout << x << ' ' << y << endl;
	if(vis[x][y]) return dp[x][y];
	int zuo = y-1, you = y+1;
	if(zuo<1) zuo = n;
	if(you>n) you = 1;
	//cout << ' ' <<zuo << ' ' <<you << endl;
	dp[x][y] = getans(x-1, zuo) + getans(x-1, you);
	//cout << dp[x][y] << endl;
	vis[x][y] = 1;
	return dp[x][y];
}

int main()
{
	memset(dp, 0, sizeof(dp));
	memset(vis, 0, sizeof(vis));
	scanf("%d%d", &n, &m);
	dp[0][1] = 1;
	vis[0][1] = 1;
	for(int i=2;i<=n;i++) vis[0][i] = 1;
	for(int i=1;i<=n;i++) getans(m, i);
	printf("%lld", getans(m, 1));
	cout <<endl;
	// for(int i=0;i<=m;i++)
	// {
		// for(int j=1;j<=n;j++)
		// {
			// printf("%4lld", dp[i][j]);
		// }
		// cout << endl;
	// }
	return 0;
}
```

#### ã€Œæœ¨ã€è¿·é›¾æ£®æ—

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1010
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

  èµ›æ—¶æç¤ºï¼šä¿è¯å‡ºå‘ç‚¹å’Œç»ˆç‚¹éƒ½æ˜¯ç©ºåœ° 

  å¸•ç§‹è‰æŒæ¡äº†ä¸€ç§æœ¨å±æ€§é­”æ³• 

  è¿™ç§é­”æ³•å¯ä»¥ç”Ÿæˆä¸€ç‰‡æ£®æ—ï¼ˆç±»ä¼¼äºè¿·é˜µï¼‰ï¼Œä½†ä¸€æ¬¡å®éªŒæ—¶ï¼Œå¸•ç§‹è‰ä¸å°å¿ƒå°†è‡ªå·±å›°å…¥äº†æ£®æ— 

  å¸•ç§‹è‰å¤„äºåœ°å›¾çš„å·¦ä¸‹è§’ï¼Œå‡ºå£åœ¨åœ°å›¾å³ä¸Šè§’ï¼Œå¥¹åªèƒ½å¤Ÿå‘ä¸Šæˆ–è€…å‘å³è¡Œèµ° 

  ç°åœ¨ç»™ä½ æ£®æ—çš„åœ°å›¾ï¼Œä¿è¯å¯ä»¥åˆ°è¾¾å‡ºå£ï¼Œè¯·é—®æœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹æ¡ˆ 

  ç­”æ¡ˆå¯¹2333å–æ¨¡ 

**è¾“å…¥æè¿°**:

```
ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°m , nè¡¨ç¤ºæ£®æ—æ˜¯mè¡Œnåˆ—
æ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œnä¸ªæ•°ï¼Œæè¿°äº†åœ°å›¾
0  -  ç©ºåœ°
1  -  æ ‘ï¼ˆæ— æ³•é€šè¿‡ï¼‰
```

**è¾“å‡ºæè¿°**:

```
ä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆ
```

**æ€æƒ³&ä»£ç **

å’Œè¿‡æ²³å’åŒæ ·çš„æ€è·¯

```c++
#include<bits/stdc++.h>
using namespace std;
const int maxn = 3010;
int n, m;
int a[maxn][maxn];
long long dp[maxn][maxn];
int vis[maxn][maxn];


template<class T>inline void read(T &res)
{
char c;T flag=1;
while((c=getchar())<'0'||c>'9')if(c=='-')flag=-1;res=c-'0';
while((c=getchar())>='0'&&c<='9')res=res*10+c-'0';res*=flag;
}


long long getans(int x, int y)
{
	if(vis[x][y]) return dp[x][y];
	long long zuo=0, shang=0;
	if(y-1 != 0) zuo = getans(x, y-1);
	if(x-1 != 0) shang = getans(x-1, y);
	dp[x][y] = zuo + shang;
	vis[x][y] = 1;
	return dp[x][y];
}

int main()
{
	memset(dp, 0, sizeof(dp));
	memset(vis, 0, sizeof(vis));
	dp[1][1] = 1;
	vis[1][1] = 1;
	for(int i=0;i<=n;i++) vis[0][i] = 1;
	for(int i=0;i<=m;i++) vis[i][0] = 1;
	read(n);
	read(m);
	for(int i=m;i>0;i--)
	{
		for(int j=1;j<=n;j++)
		{
			read(a[i][j]);
			if(a[i][j]==1) vis[i][j]=1;
		}
	}
	printf("%lld", getans(m, n));
	return 0;
}
```

#### [NOIP2004]åˆå”±é˜Ÿå½¢

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/problem/16664
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

  Nä½åŒå­¦ç«™æˆä¸€æ’ï¼ŒéŸ³ä¹è€å¸ˆè¦è¯·å…¶ä¸­çš„(N-K)ä½åŒå­¦å‡ºåˆ—ï¼Œä½¿å¾—å‰©ä¸‹çš„Kä½åŒå­¦æ’æˆåˆå”±é˜Ÿå½¢ã€‚  

  åˆå”±é˜Ÿå½¢æ˜¯æŒ‡è¿™æ ·çš„ä¸€ç§é˜Ÿå½¢ï¼šè®¾Kä½åŒå­¦ä»å·¦åˆ°å³ä¾æ¬¡ç¼–å·ä¸º1ï¼Œ2â€¦ï¼ŒKï¼Œä»–ä»¬çš„èº«é«˜åˆ†åˆ«ä¸ºT1ï¼ŒT2ï¼Œâ€¦ï¼ŒTKï¼Œ åˆ™ä»–ä»¬çš„èº«é«˜æ»¡è¶³T1<...<Ti>Ti+1>â€¦>TK(1<=i<=K)ã€‚  

  ä½ çš„ä»»åŠ¡æ˜¯ï¼Œå·²çŸ¥æ‰€æœ‰Nä½åŒå­¦çš„èº«é«˜ï¼Œè®¡ç®—æœ€å°‘éœ€è¦å‡ ä½åŒå­¦å‡ºåˆ—ï¼Œå¯ä»¥ä½¿å¾—å‰©ä¸‹çš„åŒå­¦æ’æˆåˆå”±é˜Ÿå½¢ã€‚  

**è¾“å…¥æè¿°**:

```
è¾“å…¥çš„ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•°N(2<=N<=100)ï¼Œè¡¨ç¤ºåŒå­¦çš„æ€»æ•°ã€‚ç¬¬ä¸€è¡Œæœ‰nä¸ªæ•´æ•°ï¼Œç”¨ç©ºæ ¼åˆ†éš”ï¼Œç¬¬iä¸ªæ•´æ•°Ti(130<=Ti<=230)æ˜¯ç¬¬iä½åŒå­¦çš„èº«é«˜(å˜ç±³)ã€‚
```

**è¾“å‡ºæè¿°**:

```
è¾“å‡ºåŒ…æ‹¬ä¸€è¡Œï¼Œè¿™ä¸€è¡ŒåªåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œå°±æ˜¯æœ€å°‘éœ€è¦å‡ ä½åŒå­¦å‡ºåˆ—ã€‚
```

**æ€æƒ³&ä»£ç **

æœ€é•¿ä¸Šå‡å­åºåˆ—æ”¹è¿›ç‰ˆ

$dp[i] = max(dp[k]) + 1$, kå°äºiä¸”h[k]å°äºh[i]ã€‚

æ±‚ä¸€éæœ€é•¿ä¸Šå‡å­åºåˆ—ï¼Œå†åŒç†æ±‚æœ€é•¿ä¸‹é™å­åºåˆ—

ç»“æœ$N-max(dp[i]+dp2[i]-1)$

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn = 110;
int dp[maxn];
int dp2[maxn];
int N;
int h[maxn];
int ans = 0;

int getans(int x)
{
	if(dp[x]>=0) return dp[x];
	for(int i=0;i<x;i++)
	{
		getans(i);
		if(h[i]<h[x]) dp[x] = max(dp[i]+1, dp[x]);
	}
	return dp[x];
}

int getans2(int x)
{
	if(dp2[x]>=0) return dp2[x];
	for(int i=x+1;i<=N+1;i++)
	{
		getans2(i);
		if(h[i]<h[x]) dp2[x] = max(dp2[i]+1, dp2[x]);
	}
	return dp2[x];	
}

int main()
{
	memset(dp, -1, sizeof(dp));
	memset(dp2, -1, sizeof(dp2));
	dp[0] = 0;
	h[0] = 0;
	scanf("%d", &N);
	h[N+1] = 0;
	dp2[N+1] = 0;
	for(int i=1;i<=N;i++) scanf("%d", &h[i]);
	getans(N);
	getans2(1);
	//for(int i=1;i<=N;i++) cout << dp2[i] <<' ';
	//cout << endl;
	for(int i=1;i<=N;i++)
	{
		ans = max(ans, dp[i]+dp2[i]-1);
	}
	printf("%d", N-ans);
	return 0;
}
```



#### å…è´¹é¦…é¥¼

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1006
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

   SERKOIæœ€æ–°æ¨å‡ºäº†ä¸€ç§å«åšâ€œå…è´¹é¦…é¥¼â€çš„æ¸¸æˆ:æ¸¸æˆåœ¨ä¸€ä¸ªèˆå°ä¸Šè¿›è¡Œã€‚èˆå°çš„å®½åº¦ä¸ºWæ ¼ï¼Œå¤©å¹•çš„é«˜åº¦ä¸ºHæ ¼ï¼Œæ¸¸æˆè€…å ä¸€æ ¼ã€‚å¼€å§‹æ—¶æ¸¸æˆè€…ç«™åœ¨èˆå°çš„æ­£ä¸­å¤®ï¼Œæ‰‹é‡Œæ‹¿ç€ä¸€ä¸ªæ‰˜ç›˜ã€‚ä¸‹å›¾ä¸ºå¤©å¹•çš„é«˜åº¦ä¸º4æ ¼æ—¶æŸä¸€ä¸ªæ—¶åˆ»æ¸¸æˆè€…æ¥é¦…é¥¼çš„æƒ…æ™¯ã€‚ 

  ![img](https://te4p0t.github.io/assets/images/typora-user-images/202204262301948.png)


   æ¸¸æˆå¼€å§‹åï¼Œä»èˆå°å¤©å¹•é¡¶ç«¯çš„æ ¼å­ä¸­ä¸æ–­å‡ºç°é¦…é¥¼å¹¶å‚ç›´ä¸‹è½ã€‚æ¸¸æˆè€…å·¦å³ç§»åŠ¨å»æ¥é¦…é¥¼ã€‚æ¸¸æˆè€…æ¯ç§’å¯ä»¥å‘å·¦æˆ–å‘å³ç§»åŠ¨ä¸€æ ¼æˆ–ä¸¤æ ¼ï¼Œä¹Ÿå¯ä»¥ç«™åœ¨åŸåœ°ä¸åŠ¨ã€‚
 é¦…é¥¼æœ‰å¾ˆå¤šç§ï¼Œæ¸¸æˆè€…äº‹å…ˆæ ¹æ®è‡ªå·±çš„å£å‘³ï¼Œå¯¹å„ç§é¦…é¥¼ä¾æ¬¡æ‰“äº†åˆ†ã€‚åŒæ—¶ï¼Œåœ¨8-308ç”µè„‘çš„é¥æ§ä¸‹ï¼Œå„ç§é¦…é¥¼ä¸‹è½çš„é€Ÿåº¦ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸‹è½é€Ÿåº¦ä»¥æ ¼/ç§’ä¸ºå•ä½ã€‚
 å½“é¦…é¥¼åœ¨æŸä¸€ç§’æœ«æ°å¥½åˆ°è¾¾æ¸¸æˆè€…æ‰€åœ¨çš„æ ¼å­ä¸­ï¼Œæ¸¸æˆè€…å°±æ”¶é›†åˆ°äº†è¿™å—é¦…é¥¼ã€‚
 å†™ä¸€ä¸ªç¨‹åºï¼Œå¸®åŠ©æˆ‘ä»¬çš„æ¸¸æˆè€…æ”¶é›†é¦…é¥¼ï¼Œä½¿å¾—æ‰€æ”¶é›†é¦…é¥¼çš„åˆ†æ•°ä¹‹å’Œæœ€å¤§ã€‚  

**è¾“å…¥æè¿°**:

```
ç¬¬ä¸€è¡Œæ˜¯ç”¨ç©ºæ ¼éš”å¼€çš„ä¸¤ä¸ªæ­£æ•´æ•°ï¼Œåˆ†åˆ«ç»™å‡ºäº†èˆå°çš„å®½åº¦Wï¼ˆ1åˆ°99ä¹‹é—´çš„å¥‡æ•°ï¼‰å’Œé«˜åº¦Hï¼ˆ1åˆ°100ä¹‹é—´çš„æ•´æ•°ï¼‰ã€‚
æ¥ä¸‹æ¥ä¾é¦…é¥¼çš„åˆå§‹ä¸‹è½æ—¶é—´é¡ºåºç»™å‡ºäº†æ‰€æœ‰é¦…é¥¼çš„ä¿¡æ¯ã€‚æ¯ä¸€è¡Œç»™å‡ºäº†ä¸€å—é¦…é¥¼çš„ä¿¡æ¯ã€‚ç”±å››ä¸ªæ­£æ•´æ•°ç»„æˆï¼Œåˆ†åˆ«è¡¨ç¤ºäº†é¦…é¥¼çš„åˆå§‹ä¸‹è½æ—¶åˆ»ï¼ˆ0åˆ°1000ç§’ï¼‰ï¼Œæ°´å¹³ä½ç½®ã€ä¸‹è½é€Ÿåº¦ï¼ˆ1åˆ°100ï¼‰ä»¥åŠåˆ†å€¼ã€‚æ¸¸æˆå¼€å§‹æ—¶åˆ»ä¸º0ã€‚ä»1å¼€å§‹è‡ªå·¦å‘å³ä¾æ¬¡å¯¹æ°´å¹³æ–¹å‘çš„æ¯æ ¼ç¼–å·ã€‚
è¾“å…¥æ–‡ä»¶ä¸­åŒä¸€è¡Œç›¸é‚»ä¸¤é¡¹ä¹‹é—´ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªç©ºæ ¼éš”å¼€
```

**è¾“å‡ºæè¿°**:

```
ç¬¬ä¸€è¡Œç»™å‡ºäº†ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºä½ çš„ç¨‹åºæ‰€æ”¶é›†çš„æœ€å¤§åˆ†æ•°ä¹‹å’Œã€‚
å…¶åçš„æ¯ä¸€è¡Œä¾æ—¶é—´é¡ºåºç»™å‡ºäº†æ¸¸æˆè€…æ¯ç§’çš„å†³ç­–ã€‚è¾“å‡º0è¡¨ç¤ºåŸåœ°ä¸åŠ¨ã€1æˆ–2è¡¨ç¤ºå‘å³ç§»åŠ¨ä¸€æ­¥æˆ–ä¸¤æ­¥ã€-1 æˆ–-2è¡¨ç¤ºå‘å·¦ç§»åŠ¨ä¸€æ­¥æˆ–ä¸¤æ­¥ã€‚è¾“å‡ºåº”æŒç»­åˆ°æ¸¸æˆè€…æ”¶é›†å®Œä»–è¦æ”¶é›†çš„æœ€åä¸€å—é¦…é¥¼ä¸ºæ­¢
```

**æ€æƒ³&ä»£ç **

é¦–å…ˆå¯¹æ¯å—é¦…é¥¼çš„æ•°æ®è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢åˆ°äºŒç»´æ•°ç»„valueä¸Š

å…¶ä¸­value\[i\]\[j\]è¡¨ç¤ºåœ¨ç¬¬iç§’ä¸‹é™åˆ°ï¼ˆ1ï¼Œjï¼‰è¯¥ä½ç½®å¤„çš„é¦…é¥¼çš„åˆ†æ•°æ€»å’Œã€‚

è®¾dp\[i\]\[j\]è¡¨ç¤ºç¬¬iç§’åœ¨ç¬¬jä¸ªä½ç½®æ‰€èƒ½å¤Ÿå¾—åˆ°çš„æœ€å¤§åˆ†æ•°ä¹‹å’Œã€‚

$dp[i][j] = max(dp[i-1][k])+value[i][j], j-2\le k \le j+2$

```c++
```





****

### å¾…å®Œæˆ

NC 105685 poj1088 æ»‘é›ª

æœ€å¤§å­ä¸²å’Œ

NC 106055 poj1458 æœ€é•¿å…¬å…±å­åºåˆ—



## èƒŒåŒ…

### 01èƒŒåŒ…

**æ€æƒ³&ä»£ç **

$dp[i][j]$è¡¨ç¤ºç¬¬iä¸ªç‰©å“è£…æ»¡jç©ºé—´å¤§å°æ‰€èƒ½å¾—åˆ°çš„ä»·å€¼

$dp[i][j] = max(dp[i-1][j], dp[i-1][j-w[i]]+value[i])$

**N<=20, V<=10^9**

èƒŒåŒ…ä½“ç§¯å¤ªå¤§ï¼Œä½†ç‰©å“æ•°è¾ƒå°ï¼Œç›´æ¥æš´åŠ›æšä¸¾

**N<=40, V<=10^9**

æ•´ä½“äºŒåˆ†æ‹¼æ¥ç­”æ¡ˆ

**N<=100, V<=10^9**

ç”¨mapæ˜ å°„ä½“ç§¯



**å®Œå…¨èƒŒåŒ…**

åœ¨01èƒŒåŒ…çš„åŸºç¡€ä¸Šæ¯ä¸ªç‰©å“æœ‰æ— æ•°ä»¶ä¾›é€‰æ‹©ã€‚

**æ€æƒ³&ä»£ç **

$dp[i][j]$ä»ç„¶è¡¨ç¤ºç¬¬iä¸ªç‰©å“æ°å¥½æ”¾å…¥ä¸€ä¸ªå®¹é‡ä¸ºvçš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼

åœ¨æ¯æ¬¡å¾ªç¯çš„è¿‡ç¨‹ä¸­åŠ ä¸€ä¸ªå¯¹iä»¶ç‰©å“éå†ä¸ªæ•°çš„å¾ªç¯ã€‚

$dp[i][j] = max(dp[i-1][j-k*w[i]]+k*v[i]), 0\le k*w[i]\le j$

æ—¶é—´å¤æ‚åº¦ä¸º$O(V*\sum(\frac{V}{c[i]}))$

ä½†åªæ˜¯è¿™æ ·çš„è¯ç»å¤§éƒ¨åˆ†é¢˜è¿‡ä¸å»

è€ƒè™‘åˆ°åœ¨01èƒŒåŒ…å°±åœ°æ»šåŠ¨çš„ä»»åŠ¡ä¸­ï¼Œå¾ªç¯å¦‚æœä¿æŒæ­£åºå°±ä¼šå‡ºç°å°†åŒä¸€ä¸ªç‰©å“è®¡ç®—å¤šæ¬¡çš„æƒ…å†µï¼Œå®Œå…¨é€‚ç”¨äºå®Œå…¨èƒŒåŒ…é—®é¢˜ï¼Œå› æ­¤å¯ä»¥ç›´æ¥å€Ÿé‰´è¿‡æ¥ã€‚

å› æ­¤è§£å†³å®Œå…¨èƒŒåŒ…çš„æ–¹æ³•ï¼šå°±åœ°æ»šåŠ¨+å†…å¾ªç¯æ­£åº

### å¤šé‡èƒŒåŒ…

æœ‰Nç§ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸ºVçš„èƒŒåŒ…ã€‚ç¬¬iç§ç‰©å“æœ€å¤šæœ‰n\[i\]ä»¶å¯ç”¨ï¼Œæ¯ä»¶è´¹ç”¨ï¼ˆä½“ç§¯ï¼‰æ˜¯w\[i\]ï¼Œä»·å€¼æ˜¯v\[i\]ã€‚æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…å¯ä½¿è¿™äº›ç‰©å“çš„è´¹ç”¨æ€»å’Œä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”ä»·å€¼æ€»å’Œæœ€å¤§ã€‚

**æ€æƒ³&ä»£ç **

æœ€æœ´ç´ çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹å’Œå®Œå…¨èƒŒåŒ…ä¸€æ ·

$dp[i][j] = max\{dp[i][j-k*w[i]]+k*v[i] | 0\le k\le n[i]\}$

å¤æ‚åº¦æ˜¯$O(V*\sum{n[i]})$ï¼Œæ¯”è¾ƒå¤§ï¼Œéœ€è¦ä¼˜åŒ–ã€‚

**ä¼˜åŒ–**

æ•°å­—çš„äºŒè¿›åˆ¶æ‹†åˆ†

- è½¬åŒ–ä¸º01èƒŒåŒ…æ±‚è§£ï¼šæŠŠç¬¬iä¸­ç‰©å“æ¢æˆn\[i\]ä»¶0èƒŒåŒ…ä¸­çš„ç‰©å“ï¼Œåˆ™å¾—åˆ°äº†ç‰©å“æ•°ä¸º$\sum{n[i]}$çš„01èƒŒåŒ…é—®é¢˜
- å½“ç„¶è¿™æ ·ç›´æ¥æ±‚è§£çš„å¤æ‚åº¦ä»ç„¶æ˜¯$O(V*\sum {n[i]})$
- æˆ‘ä»¬è€ƒè™‘æŠŠç¬¬iç§ç‰©å“æ¢æˆè‹¥å¹²ä»¶ç‰©å“ï¼Œä½¿å¾—åŸé—®é¢˜ä¸­ç¬¬iä¸­ç‰©å“å¯å–çš„æ¯ç§ç­–ç•¥â€”â€”å–0...n\[i\]ä»¶â€”â€”å‡èƒ½ç­‰ä»·äºå–è‹¥å¹²ä»¶ä»£æ¢ä»¥åçš„ç‰©å“ã€‚å¦å¤–ï¼Œå–è¶…è¿‡n\[i\]ä»¶çš„ç­–ç•¥å¿…ä¸èƒ½å‡ºç°
- æ–¹æ³•æ˜¯ï¼šå°†ç¬¬iä¸­ç‰©å“åˆ†æˆè‹¥å¹²ä»¶ç‰©å“ï¼Œå…¶ä¸­æ¯ä»¶ç‰©å“æœ‰ä¸€ä¸ªç³»æ•°ï¼Œè¿™ä»¶ç‰©å“çš„è´¹ç”¨å’Œä»·å€¼å‡æ˜¯åŸæ¥çš„è´¹ç”¨å’Œä»·å€¼ä¹˜ä»¥è¿™ä¸ªç³»æ•°ã€‚ä½¿è¿™äº›ç³»æ•°åˆ†åˆ«ä¸º**1, 2, 4, ..., 2^(k-1), n\[i\]-2^k+1ï¼Œä¸”kæ˜¯æ»¡è¶³n\[i\]-2^k+1>0çš„æœ€å¤§æ•´æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœn\[i\]ä¸º13ï¼Œä¹æ±Ÿè¿™ç§ç‰©å“åˆ†æˆç³»æ•°åˆ†åˆ«ä¸º1,2,4,6çš„å››ä»¶ç‰©å“ã€‚

åŸç†

1. $1+2+4+...+2^{k-1}+n[i]-2^k+1=n[i]$è¿™å°±ä¿è¯äº†æœ€å¤šä¸ºn\[i\]ä¸ªç‰©å“
2. $1,2,4,...,2^{k-1}$å¯ä»¥å‡‘å‡º1åˆ°$2^{k}-1$çš„æ‰€æœ‰æ•´æ•°ï¼ˆè”ç³»ä¸€ä¸ªæ•°çš„äºŒè¿›åˆ¶æ‹†åˆ†å³å¯è¯æ˜ï¼‰
3. $2^{k}...n[i]$çš„æ‰€æœ‰æ•´æ•°å¯ä»¥ç”¨è‹¥å¹²ä¸Šè¿°å…ƒç´ å‡‘å‡ºï¼ˆå¯ä»¥ç†è§£ä¸ºå‡‘n\[i\]-tï¼Œè€Œn\[i\]ä¸ºä¸Šé¢æ‰€æœ‰æ•°çš„å’Œï¼Œtåˆ™æ˜¯ä¸€ä¸ªå°äº$2^k$çš„æ•°ï¼Œé‚£ä¹ˆåœ¨æ‰€æœ‰çš„æ•°ä¸­å»æ‰ç»„æˆ$2^k$çš„é‚£äº›æ•°å‰©ä¸‹çš„å°±å¯ä»¥ç»„æˆn\[i\]-täº†ï¼‰

è¿™æ ·ä¼˜åŒ–åå¤æ‚åº¦ä¸º$O(V*\sum{\log{n[i]}})$

### äºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜

äºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜æ˜¯æŒ‡ï¼šå¯¹äºæ¯ä»¶ç‰©å“ï¼Œå…·æœ‰ä¸¤ç§ä¸åŒçš„è´¹ç”¨ã€‚é€‰æ‹©è¿™ä»¶ç‰©å“å¿…é¡»åŒæ—¶ä»˜å‡ºè¿™ä¸¤ç§ä»£ä»·ã€‚å¯¹äºæ¯ç§ä»£ä»·éƒ½æœ‰ä¸€ä¸ªå¯ä»˜å‡ºçš„æœ€å¤§å€¼ï¼ˆèƒŒåŒ…å®¹é‡ï¼‰ã€‚é—®æ€æ ·é€‰æ‹©ç‰©å“å¯ä»¥å¾—åˆ°æœ€å¤§çš„ä»·å€¼ã€‚è®¾è¿™ä¸¤ç§ä»£ä»·åˆ†åˆ«ä¸ºä»£ä»·1å’Œä»£ä»·2ï¼Œç¬¬iå‡ç‰©å“æ‰€éœ€çš„ä¸¤ç§ä»£ä»·åˆ†åˆ«ä¸ºa\[i\]å’Œb\[i\]ã€‚ä¸¤ç§ä»£ä»·å®¢æœå¤„çš„æœ€å¤§å€¼ï¼ˆä¸¤ç§èƒŒåŒ…å®¹é‡ï¼‰åˆ†åˆ«ä¸ºVå’ŒUã€‚ç‰©å“çš„ä»·å€¼ä¸ºw\[i\]ã€‚

**æ€æƒ³&ä»£ç **

è®¾$dp[i][v][u]$è¡¨ç¤ºå‰iä»¶ç‰©å“ä»˜å‡ºä¸¤ç§ä»£ä»·åˆ†åˆ«ä¸ºvå’Œæ—¶å¯è·å¾—çš„æœ€å¤§ä»·å€¼ã€‚çŠ¶æ€è½¬ç§»æ–¹ç¨‹å°±æ˜¯

$dp[i][v][u] = max{dp[i-1][v][u], dp[i-1][v-a[i]][u-b[i]]+value[i]}$

**å½“ä½ å‘ç°é¢˜ç›®æ˜¯ç”±ç†Ÿæ‚‰çš„åŠ¨æ€è§„åˆ’é¢˜ç›®æ·»åŠ äº†é™åˆ¶æ¡ä»¶å˜å½¢å¾—æ¥çš„æ—¶å€™ï¼Œå¯ä»¥å°è¯•åœ¨åŸé¢˜çš„çŠ¶æ€ä¸­åŠ ä¸€ç»´ä»¥æ»¡è¶³æ–°çš„é™åˆ¶æ¡ä»¶**

### åˆ†ç»„èƒŒåŒ…

æœ‰Nä»¶ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸ºVçš„èƒŒåŒ…ã€‚ç¬¬iä»¶ç‰©å“çš„è´¹ç”¨æ˜¯c\[i\]ï¼Œä»·å€¼æ˜¯value\[i\]ã€‚è¿™äº›ç‰©å“è¢«åˆ’åˆ†ä¸ºè‹¥å¹²ç»„ï¼Œæ¯ç»„ä¸­çš„ç‰©å“äº’ç›¸å†²çªï¼Œæœ€å¤šé€‰ä¸€ä»¶ã€‚æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…å¯ä½¿è¿™äº›ç‰©å“çš„è´¹ç”¨æ€»å’Œä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”ä»·å€¼æ€»å’Œæœ€å¤§ã€‚

æœ¬é¢˜å’Œå‰é¢çš„é¢˜æœ€å¤§çš„ä¸åŒæ˜¯â€”â€”æ¯ç»„ç‰©å“æœ‰è‹¥å¹²ä¸­ç­–ç•¥ï¼šé€‰æ‹©æœ¬ç»„çš„æŸä¸€ä»¶ï¼Œæˆ–è€…ä¸€ä»¶éƒ½ä¸é€‰ã€‚

**æ€æƒ³&ä»£ç **

$dp[k][v]$è¡¨ç¤ºå‰kç»„ç‰©å“èŠ±è´¹è´¹ç”¨vèƒ½å–å¾—çš„æœ€å¤§å€¼ã€‚

$dp[k][v]=max{dp[k-1][v], dp[k-1][v-c[i]]+value[i]}|ç‰©å“iå±äºç»„k$

ä½¿ç”¨ä¸€ç»´æ•°ç»„ä¼ªä»£ç å¦‚ä¸‹

```c++
for æ‰€æœ‰çš„ç»„k
    for v=V...0
        for æ‰€æœ‰çš„iå±äºk
            dp[v] = max{f[v], f[v-c[i]+w[i]]}
```

```for v=V...0```è¿™ä¸€å±‚å¾ªç¯å¿…é¡»åœ¨```for æ‰€æœ‰çš„iå±äºç»„k```ä¹‹å¤–ã€‚è¿™æ ·æ‰èƒ½ä¿è¯æ¯ä¸€ç»„å†…çš„ç‰©å“æœ€å¤šåªæœ‰ä¸€ä¸ªä¼šè¢«æ·»åŠ åˆ°èƒŒåŒ…ä¸­ã€‚

### ä¹ é¢˜

#### NC 16693 è£…ç®±é—®é¢˜

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/problem/16693
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

æœ‰ä¸€ä¸ªç®±å­å®¹é‡ä¸ºVï¼ˆæ­£æ•´æ•°ï¼Œ0 â‰¤ V â‰¤ 20000ï¼‰ï¼ŒåŒæ—¶æœ‰nä¸ªç‰©å“ï¼ˆ0ï¼œn â‰¤ 30ï¼‰ï¼Œæ¯ä¸ªç‰©å“æœ‰ä¸€ä¸ªä½“ç§¯ï¼ˆæ­£æ•´æ•°ï¼‰ã€‚
 è¦æ±‚nä¸ªç‰©å“ä¸­ï¼Œä»»å–è‹¥å¹²ä¸ªè£…å…¥ç®±å†…ï¼Œä½¿ç®±å­çš„å‰©ä½™ç©ºé—´ä¸ºæœ€å°ã€‚

**è¾“å…¥æè¿°**:

```
1ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºç®±å­å®¹é‡
1ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ‰nä¸ªç‰©å“
æ¥ä¸‹æ¥nè¡Œï¼Œåˆ†åˆ«è¡¨ç¤ºè¿™nä¸ªç‰©å“çš„å„è‡ªä½“ç§¯
```

**è¾“å‡ºæè¿°**:

```
1ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºç®±å­å‰©ä½™ç©ºé—´ã€‚
```

**æ€æƒ³&ä»£ç **

$dp[i][j]$è¡¨ç¤ºç¬¬iä¸ªç‰©å“æ—¶èƒ½å¦æ°å¥½å¡«æ»¡jç©ºé—´çš„å¤§å°ã€‚

$dp[i][j] = dp[i-1][j] || dp[i-1][j-v[i]]$

$dp[0][0]=1$

- å¯ä»¥0 1æ»šåŠ¨ || å°±åœ°æ»šåŠ¨ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxv = 20010;
const int maxn = 40;
int n, V;
int a[maxn];
int dp[maxn][maxv];


int main()
{
	scanf("%d%d", &V, &n);
	for(int i=1;i<=n;i++)
	{
		scanf("%d", &a[i]);
	}
	memset(dp, 0, sizeof(0));
	dp[0][0] = 1;
	for(int i=1;i<=n;i++)
	{
		for(int j=0;j<=V;j++)
		{
			if(j<a[i]) dp[i][j] = dp[i-1][j];
			else dp[i][j] = dp[i-1][j] || dp[i-1][j-a[i]];
		}
	}
	int ans = 0;
	for(int i=V;i>=0;i--)
	{
		if(dp[n][i]==1)
		{
			ans = i;
			break;
		}
	}
	printf("%d", V-ans);
	return 0;
}
```

01æ»šåŠ¨

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxv = 20010;
const int maxn = 40;
int n, V;
int a[maxn];
int dp[2][maxv];


int main()
{
	scanf("%d%d", &V, &n);
	for(int i=1;i<=n;i++)
	{
		scanf("%d", &a[i]);
	}
	memset(dp, 0, sizeof(0));
	dp[0][0] = 1;
	for(int i=1;i<=n;i++)
	{
		for(int j=0;j<=V;j++)
		{
			if(j<a[i]) dp[i%2][j] = dp[(i-1)%2][j];
			else dp[i%2][j] = dp[(i-1)%2][j] || dp[(i-1)%2][j-a[i]];
		}
	}
	int ans = 0;
	for(int i=V;i>=0;i--)
	{
		if(dp[n%2][i]==1)
		{
			ans = i;
			break;
		}
	}
	printf("%d", V-ans);
	return 0;
}
```

å°±åœ°æ»šåŠ¨

æ³¨æ„dpè¿‡ç¨‹ä¸­å†…å¾ªç¯çš„jéœ€è¦ä»å¤§åˆ°å°éå†ï¼Œå¦åˆ™åœ¨ä¸€æ¬¡éå†è¿‡ç¨‹ä¸­ä¼šå°†å½“å‰ç‰©å“ç®—næ¬¡ã€‚

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxv = 20010;
const int maxn = 40;
int n, V;
int a[maxn];
int dp[maxv];


int main()
{
	scanf("%d%d", &V, &n);
	for(int i=1;i<=n;i++)
	{
		scanf("%d", &a[i]);
	}
	memset(dp, 0, sizeof(0));
	dp[0] = 1;
	for(int i=1;i<=n;i++)
	{
		for(int j=V;j>=a[i];j--)
		{
			dp[j] = dp[j] || dp[j-a[i]];
		}
	}
	int ans = 0;
	for(int i=V;i>=0;i--)
	{
		if(dp[i]==1)
		{
			ans = i;
			break;
		}
	}
	printf("%d", V-ans);
	return 0;
}
```

#### CSLåˆ†è‹¹æœ

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/problem/17871
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

CSLæ‰‹ä¸Šæœ‰nä¸ªè‹¹æœï¼Œç¬¬iä¸ªè‹¹æœçš„è´¨é‡æ˜¯wiï¼Œç°åœ¨ä»–æƒ³æŠŠè¿™äº›è‹¹æœåˆ†ç»™ä»–çš„å¥½æœ‹å‹wavatorå’Œtokitsukazeã€‚ä½†æ˜¯CSLä¸ºäº†ä¸è®©ä»–ä»¬æ‰“æ¶ï¼Œæ ¹æ®è´¨é‡å†³å®šå°½é‡åœ°å‡åˆ†æˆä¸¤å †åˆ†ç»™ä»–ä»¬ã€‚ç°åœ¨CSLæƒ³çŸ¥é“åˆ°åº•ç»™æ¯ä¸ªäººåˆ†å¤šå°‘è´¨é‡çš„è‹¹æœã€‚

 æ³¨æ„ï¼šè‹¹æœä¸èƒ½åŠˆå¼€æ¥ï¼Œå¹¶ä¸”å¦‚æœä¸èƒ½æ­£å¥½å‡åˆ†ï¼Œtokitsukazeå°å§å§ä¼šæ‹¿åˆ°é‡çš„é‚£ä¸€å †ã€‚

**è¾“å…¥æè¿°**:

```
ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•´æ•°n(2 â‰¤ n â‰¤ 100)ï¼Œç¬¬äºŒè¡Œnä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ¯ä¸ªè‹¹æœçš„è´¨é‡wi(1 â‰¤ wi â‰¤ 100)ã€‚
```

**è¾“å‡ºæè¿°**:

```
è¾“å‡ºä¸¤ä¸ªæ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºwavatorå’Œtokitsukazeå¾—åˆ°çš„è‹¹æœçš„è´¨é‡ã€‚
```

**æ€æƒ³&ä»£ç **

åˆšå¼€å§‹çš„æƒ³æ³•æ˜¯

ç”¨dp\[i\]\[j\]è¡¨ç¤ºåœ¨åˆ†äº†ç¬¬iä¸ªè‹¹æœåï¼Œä¸¤äººç›¸å·®jçš„é‡é‡ã€‚æ­¤å¤„çš„jå–10010+å®é™…é‡é‡çš„åšæ³•æ¥é¿å…æ•°ç»„ä¸­çš„è´Ÿæ•°ã€‚

è¿™æ ·$dp[i][j] = dp[i-1][k\pm w[i]]$ï¼Œå…¶ä¸­$0 \le k \le 20000$ä¸”$dp[i-1][k]=1$

æœ€åä»10010å¼€å§‹å‘ä¸¤ç«¯æœï¼ˆå…¶å®å‘ä¸€ç«¯æœå³å¯ï¼‰ï¼Œè¿™æ ·å‹‰å¼ºèƒ½è¿‡ã€‚

```c++
#include<bits/stdc++.h>
using namespace std;

int dp[110][200020];
int n;
int w[110];
int sum=0;

int main()
{
	memset(dp, 0, sizeof(dp));
	scanf("%d", &n);
	for(int i=1;i<=n;i++)
	{
		scanf("%d", &w[i]);
		sum += w[i];
	}
	dp[0][10010] = 1;
	for(int i=1;i<=n;i++)
	{
		for(int j=1;j<=20000;j++)
		{
			if(dp[i-1][j]==1)
			{
				dp[i][j+w[i]] = 1;
				dp[i][j-w[i]] = 1;
			}
		}
	}
	int ans=0;
	for(int i=0;i<=10000;i++)
	{
		if(dp[n][10010+i]==1 || dp[n][10010-i]==1)
		{
			ans = i;
			break;
		}
	}
	printf("%d %d", (sum-ans)/2, (sum+ans)/2);
	return 0;
}
```

ä¹‹åå‘ç°è ¢äº†ã€‚è¿™ä¸ªé¢˜å®é™…ä¸Šå°±æ˜¯ä»¥sum>>1ä¸ºä¸Šç•Œçš„èƒŒåŒ…é—®é¢˜ã€‚

```c++
#include<bits/stdc++.h>
using namespace std;

int dp[110][10010];
int n;
int w[110];
int sum=0;

int main()
{
	memset(dp, 0, sizeof(dp));
	scanf("%d", &n);
	for(int i=1;i<=n;i++)
	{
		scanf("%d", &w[i]);
		sum += w[i];
	}
	dp[0][0] = 1;
	for(int i=1;i<=n;i++)
	{
		for(int j=0;j<=(sum>>1);j++)
		{
			if(j<w[i]) dp[i][j] = dp[i-1][j];
			if(j>=w[i]) dp[i][j] = dp[i-1][j-w[i]] || dp[i-1][j];
		}
	}
	int ans=0;
	for(int i=(sum>>1);i>=0;i--)
	{
		if(dp[n][i]==1)
		{
			ans = i;
			break;
		}
	}
	printf("%d %d", ans, sum-ans);
	return 0;
}
```

#### [NOIP]é‡‡è¯

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1018
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

  è¾°è¾°æ˜¯ä¸ªå¤©èµ„èªé¢–çš„å­©å­ï¼Œä»–çš„æ¢¦æƒ³æ˜¯æˆä¸ºä¸–ç•Œä¸Šæœ€ä¼Ÿå¤§çš„åŒ»å¸ˆã€‚ä¸ºæ­¤ï¼Œä»–æƒ³æ‹œé™„è¿‘æœ€æœ‰å¨æœ›çš„åŒ»å¸ˆä¸ºå¸ˆã€‚åŒ»å¸ˆä¸ºäº†åˆ¤æ–­ä»–çš„èµ„è´¨ï¼Œç»™ä»–å‡ºäº†ä¸€ä¸ªéš¾é¢˜ã€‚åŒ»å¸ˆæŠŠä»–å¸¦åˆ°ä¸€ä¸ªåˆ°å¤„éƒ½æ˜¯è‰è¯çš„å±±æ´é‡Œå¯¹ä»–è¯´ï¼šâ€œå­©å­ï¼Œè¿™ä¸ªå±±æ´é‡Œæœ‰ä¸€äº›ä¸åŒçš„è‰è¯ï¼Œé‡‡æ¯ä¸€æ ªéƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼Œæ¯ä¸€æ ªä¹Ÿæœ‰å®ƒè‡ªèº«çš„ä»·å€¼ã€‚æˆ‘ä¼šç»™ä½ ä¸€æ®µæ—¶é—´ï¼Œåœ¨è¿™æ®µæ—¶é—´é‡Œï¼Œä½ å¯ä»¥é‡‡åˆ°ä¸€äº›è‰è¯ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ªèªæ˜çš„å­©å­ï¼Œä½ åº”è¯¥å¯ä»¥è®©é‡‡åˆ°çš„è‰è¯çš„æ€»ä»·å€¼æœ€å¤§ã€‚â€   

  å¦‚æœä½ æ˜¯è¾°è¾°ï¼Œä½ èƒ½å®Œæˆè¿™ä¸ªä»»åŠ¡å—ï¼Ÿ  

**è¾“å…¥æè¿°**:

```
ç¬¬ä¸€è¡Œæœ‰ä¸¤ä¸ªæ•´æ•°Tï¼ˆ1<=T<=1000ï¼‰å’ŒMï¼ˆ1<=M<=100ï¼‰ï¼Œç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼ŒTä»£è¡¨æ€»å…±èƒ½å¤Ÿç”¨æ¥é‡‡è¯çš„æ—¶é—´ï¼ŒMä»£è¡¨å±±æ´é‡Œçš„è‰è¯çš„æ•°ç›®ã€‚
æ¥ä¸‹æ¥çš„Mè¡Œæ¯è¡ŒåŒ…æ‹¬ä¸¤ä¸ªåœ¨1åˆ°100ä¹‹é—´ï¼ˆåŒ…æ‹¬1å’Œ100ï¼‰çš„æ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºé‡‡æ‘˜æŸæ ªè‰è¯çš„æ—¶é—´å’Œè¿™æ ªè‰è¯çš„ä»·å€¼ã€‚
```

**è¾“å‡ºæè¿°**:

```
åŒ…æ‹¬ä¸€è¡Œï¼Œè¿™ä¸€è¡ŒåªåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºåœ¨è§„å®šçš„æ—¶é—´å†…ï¼Œå¯ä»¥é‡‡åˆ°çš„è‰è¯çš„æœ€å¤§æ€»ä»·å€¼ã€‚
```

**æ€æƒ³&ä»£ç **

01èƒŒåŒ…ç‰ˆå­é¢˜

$dp[i][j]$è¡¨ç¤ºjæ—¶é—´å†…é‡‡iä¸ªè¯å“çš„æœ€å¤§æ€»ä»·å€¼

$dp[i][j] = max\{dp[i-1][j], dp[i-1][j-t[i]]+v[i]\}$

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxt = 1010;
const int maxn = 110;

int v[maxn], t[maxn];
int dp[maxn][maxt];
int T, M;

int main()
{
	scanf("%d%d", &T, &M);
	for(int i=1;i<=M;i++)
	{
		scanf("%d%d", &t[i], &v[i]);
	}
	dp[0][0] = 0;
	for(int i=1;i<=M;i++)
	{
		for(int j=0;j<=T;j++)
		{
			if(j<t[i]) dp[i][j] = dp[i-1][j];
			else
			{
				dp[i][j] = max(dp[i-1][j], dp[i-1][j-t[i]] + v[i]);
			}
		}
	}
	printf("%d", dp[M][T]);
	return 0;
}
```

#### [NOIP]å¼€å¿ƒçš„é‡‘æ˜

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1019
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

é‡‘æ˜ä»Šå¤©å¾ˆå¼€å¿ƒï¼Œå®¶é‡Œè´­ç½®çš„æ–°æˆ¿å°±è¦é¢†é’¥åŒ™äº†ï¼Œæ–°æˆ¿é‡Œæœ‰ä¸€é—´ä»–è‡ªå·±ä¸“ç”¨çš„å¾ˆå®½æ•çš„æˆ¿é—´ã€‚æ›´è®©ä»–é«˜å…´çš„æ˜¯ï¼Œå¦ˆå¦ˆæ˜¨å¤©å¯¹ä»–è¯´ï¼šâ€œä½ çš„æˆ¿é—´éœ€è¦è´­ä¹°å“ªäº›ç‰©å“ï¼Œæ€ä¹ˆå¸ƒç½®ï¼Œä½ è¯´äº†ç®—ï¼Œåªè¦ä¸è¶…è¿‡Nå…ƒé’±å°±è¡Œâ€ã€‚ä»Šå¤©ä¸€æ—©é‡‘æ˜å°±å¼€å§‹åšé¢„ç®—ï¼Œä½†æ˜¯ä»–æƒ³ä¹°çš„ä¸œè¥¿å¤ªå¤šäº†ï¼Œè‚¯å®šä¼šè¶…è¿‡å¦ˆå¦ˆé™å®šçš„Nå…ƒã€‚äºæ˜¯ï¼Œä»–æŠŠæ¯ä»¶ç‰©å“è§„å®šäº†ä¸€ä¸ªé‡è¦åº¦ï¼Œåˆ†ä¸º5ç­‰ï¼šç”¨æ•´æ•°1~5è¡¨ç¤ºï¼Œç¬¬5ç­‰æœ€é‡è¦ã€‚ä»–è¿˜ä»å› ç‰¹ç½‘ä¸ŠæŸ¥åˆ°äº†æ¯ä»¶ç‰©å“çš„ä»·æ ¼ï¼ˆéƒ½æ˜¯æ•´æ•°å…ƒï¼‰ã€‚ä»–å¸Œæœ›åœ¨ä¸è¶…è¿‡Nå…ƒï¼ˆå¯ä»¥ç­‰äºNå…ƒï¼‰çš„å‰æä¸‹ï¼Œä½¿æ¯ä»¶ç‰©å“çš„ä»·æ ¼ä¸é‡è¦åº¦çš„ä¹˜ç§¯çš„æ€»å’Œæœ€å¤§ã€‚
 è®¾ç¬¬jä»¶ç‰©å“çš„ä»·æ ¼ä¸ºv[j]ï¼Œé‡è¦åº¦ä¸ºw[j]ï¼Œå…±é€‰ä¸­äº†kä»¶ç‰©å“ï¼Œç¼–å·ä¾æ¬¡ä¸ºj1ï¼Œj2ï¼Œâ€¦â€¦ï¼Œjkï¼Œåˆ™æ‰€æ±‚çš„æ€»å’Œä¸ºï¼š
 v[j1]*w[j1]+v[j2]*w[j2]+ â€¦+v[jk]*w[jk]ã€‚ï¼ˆå…¶ä¸­*ä¸ºä¹˜å·ï¼‰
 è¯·ä½ å¸®åŠ©é‡‘æ˜è®¾è®¡ä¸€ä¸ªæ»¡è¶³è¦æ±‚çš„è´­ç‰©å•ã€‚

**è¾“å…¥æè¿°**:

```
è¾“å…¥ç¬¬1è¡Œï¼Œä¸ºä¸¤ä¸ªæ­£æ•´æ•°ï¼Œç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼šN mï¼ˆå…¶ä¸­Nè¡¨ç¤ºæ€»é’±æ•°ï¼Œmä¸ºå¸Œæœ›è´­ä¹°ç‰©å“çš„ä¸ªæ•°ã€‚ï¼‰
ä»ç¬¬2è¡Œåˆ°ç¬¬m+1è¡Œï¼Œç¬¬jè¡Œç»™å‡ºäº†ç¼–å·ä¸ºj-1çš„ç‰©å“çš„åŸºæœ¬æ•°æ®ï¼Œæ¯è¡Œæœ‰2ä¸ªéè´Ÿæ•´æ•°v pï¼ˆå…¶ä¸­vè¡¨ç¤ºè¯¥ç‰©å“çš„ä»·æ ¼ï¼Œpè¡¨ç¤ºè¯¥ç‰©å“çš„é‡è¦åº¦ï¼‰
```

**è¾“å‡ºæè¿°**:

```
è¾“å‡ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œä¸ºä¸è¶…è¿‡æ€»é’±æ•°çš„ç‰©å“çš„ä»·æ ¼ä¸é‡è¦åº¦ä¹˜ç§¯çš„æ€»å’Œçš„æœ€å¤§å€¼ï¼ˆ<100000000ï¼‰
```

**æ€æƒ³&ä»£ç **

01èƒŒåŒ…

ä»·å€¼æ”¹ä¸ºé‡è¦åº¦å’Œä»·å€¼çš„ä¹˜ç§¯å³å¯ã€‚

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxt = 30010;
const int maxn = 30;

int p[maxn], v[maxn];
int dp[maxn][maxt];
int N, m;

int main()
{
	scanf("%d%d", &N, &m);
	for(int i=1;i<=m;i++)
	{
		scanf("%d%d", &v[i], &p[i]);
		p[i] *= v[i];
	}
	dp[0][0] = 0;
	for(int i=1;i<=m;i++)
	{
		for(int j=0;j<=N;j++)
		{
			if(j<v[i]) dp[i][j] = dp[i-1][j];
			else
			{
				dp[i][j] = max(dp[i-1][j], dp[i-1][j-v[i]] + p[i]);
			}
		}
	}

	printf("%d", dp[m][N]);
	return 0;
}
```

#### å¤±è¡¡å¤©å¹³

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1021
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

ç»ˆäºAliceèµ°å‡ºäº†å¤§é­”ç‹çš„é™·é˜±ï¼Œå¯æ˜¯ç°åœ¨å‚»å‚»çš„å¥¹å¿˜äº†å¸¦æ­¦å™¨äº†ï¼Œè¿™å¯å¦‚ä½•æ˜¯å¥½???è¿™ä¸ªæ—¶å€™ï¼Œä¸€ä¸ªç¥ç§˜è€äººèµ°åˆ°å¥¹é¢å‰ç­”åº”æ— å¿ç»™å¥¹æ­¦å™¨ï¼Œä½†è€äººæœ‰ä¸ªæ¡ä»¶ï¼Œéœ€è¦å°†æ‰€é€‰æ­¦å™¨åˆ†åˆ«æ”¾åœ¨å¤©å¹³çš„ä¸¤ç«¯ï¼Œè‹¥å¤©å¹³å¹³è¡¡åˆ™å¯ä»¥å°†å¤©å¹³ä¸Šçš„æ‰€æœ‰æ­¦å™¨æ‹¿èµ°ï¼Œè¿˜å¥½è¿™ä¸ªå¤©å¹³é”ˆè¿¹æ–‘æ–‘ï¼Œåªè¦ä¸¤ç«¯é‡é‡ç›¸å·®å°äºç­‰äºmå°±ä¼šä¿æŒå¹³è¡¡ï¼ŒAliceå‚»å‚»çš„è®¤ä¸ºè¶Šé‡çš„æ­¦å™¨è¶Šå¥½ï¼Œæ±‚Aliceæœ€å¤šèƒ½æ‹¿èµ°çš„æ­¦å™¨æ€»é‡é‡ã€‚ï¼ˆä¸é™æ“ä½œæ¬¡æ•°ï¼‰

**è¾“å…¥æè¿°**:

```
ç¬¬ä¸€è¡Œ2ä¸ªæ•´æ•° n, m;
ç¬¬äºŒè¡Œnä¸ªæ•´æ•°xï¼Œåˆ†åˆ«è¡¨ç¤ºnä»¶æ­¦å™¨çš„é‡é‡ã€‚
1 <= n <= 100; 0 <= m <= 100; 1 <= x <= 100;
```

**è¾“å‡ºæè¿°**:

```
ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºAliceæœ€å¤šèƒ½æ‹¿èµ°çš„æ­¦å™¨æ€»é‡é‡ã€‚
```

**æ€æƒ³&ä»£ç **

å¸¦èµ°æœ€å¤šæ¬¡æ•°çš„æ–¹æ¡ˆï¼Œæ— è®ºæ˜¯åˆ†å¤šå°‘æ¬¡æ“ä½œï¼Œæ€»èƒ½åˆå¹¶ä¸ºä¸€æ¬¡æ“ä½œå¸¦èµ°ã€‚

å› æ­¤$dp[i][j]$è¡¨ç¤ºç¬¬iä¸ªç‰©å“å¤©å¹³ç›¸å·®jé‡é‡çš„æƒ…å†µä¸‹æ‰€èƒ½æ‹¿åˆ°çš„æ­¦å™¨çš„æœ€å¤§æ€»é‡é‡ã€‚

$dp[i][j] = max\{dp[i-1][j], dp[i-1][abs(j-w[i])]+w[i], dp[j+w[i]]+w[i] \}$

åŠ ä¸Šçš„ç»å¯¹å€¼åœ¨æ’é™¤æ‰è´Ÿå€¼çš„æƒ…å†µä¸‹ä¸å½±å“ç»“æœï¼Œå› ä¸ºå¤©å¹³ä¸¤è¾¹æ˜¯ç­‰ä»·çš„ï¼Œè´Ÿæ•°å–ç»å¯¹å€¼ç›¸å½“äºå¤©å¹³å·¦å³ç‰©å“äº’æ¢ã€‚

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxw = 10010;
const int maxn = 110;

int n, m, sum=0, ans = 0;
int dp[maxn][maxw];
int w[maxn];

int main()
{
	scanf("%d%d", &n, &m);
	for(int i=1;i<=n;i++)
	{
		scanf("%d", &w[i]);
		sum += w[i];
	}
	memset(dp,-0x3f,sizeof(dp));
	dp[0][0] = 0;
	
	for(int i=1;i<=n;i++)
	{
		for(int j=0;j<=sum;j++)
		{
			dp[i][j] = max(dp[i-1][j], dp[i-1][abs(j-w[i])]+w[i]);
			dp[i][j] = max(dp[i][j], dp[i-1][j+w[i]]+w[i]);
		}
	}
	int ans = 0;
	for(int i=0;i<=m;i++) ans = max(ans, dp[n][i]);
	printf("%d", ans);
	return 0;
}
```

#### Music Problem

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/problem/13885
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

 Listening to the music is relax, but for obsessive(å¼ºè¿«ç—‡), it may be unbearable. 

 HH is an obsessive, he only start to listen to music at 12:00:00, and he will never stop unless the song he is listening ends at integral points (both minute and second are 0 ), that is, he can stop listen at 13:00:00 or 14:00:00,but he can't stop at 13:01:03 or 13:01:00, since 13:01:03 and 13:01ï¼š00 are not an integer hour time. 

 Now give you the length of some songs, tell HH whether it's possible to choose some songs so he can stop listen at an integral point, or tell him it's impossible. 

 Every song can be chosen at most once. 

**è¾“å…¥æè¿°**:

```
 The first line contains an positive integer T(1â‰¤Tâ‰¤60), represents there are T test cases. 
 For each test case: 
 The first line contains an integer n(1â‰¤nâ‰¤105), indicating there are n songs. 
 The second line contains n integers a1,a2â€¦an (1â‰¤aiâ‰¤109 ), the ith integer ai indicates the ith song lasts ai seconds.
```

**è¾“å‡ºæè¿°**:

```
For each test case, output one line "YES" (without quotes) if HH is possible to stop listen at an integral point, and "NO" (without quotes) otherwise.
```

**æ€æƒ³&ä»£ç **

ä»¤$dp[i][j]$è¡¨ç¤ºç¬¬ié¦–æ­Œï¼Œæ‰€éœ€æ—¶é—´jï¼Œå…¶ä¸­jä¸ºå–ä½™3600åçš„æ•°ã€‚

$dp[i][j] = d[i-1][j]|dp[i-1][(j-h[i]+3600)\%3600]$

ä½†è¿™æ ·å¤æ‚åº¦$O(T*N*3600)$å¤ªå¤§ã€‚

è€ƒè™‘é¸½å·¢åŸç†ï¼Œå½“N>=3600æ—¶ï¼Œå¿…å®šå­˜åœ¨ä¸€ç§ç»„åˆï¼Œä½¿å¾—Nä¸ªæ•°ç›¸åŠ çš„å’Œæ¨¡3600å€¼ä¸º0ã€‚

å› æ­¤å¯å°†å¤æ‚åº¦ä¼˜åŒ–åˆ°$O(T*3600*3600)$ï¼Œè¿™ä¸ªå¤æ‚åº¦å¯ä»¥è¿‡ã€‚

tips:

- åœ¨è¿™é“é¢˜å¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œä¸å¯ä»¥å°†$dp[0][0]$åˆå§‹åŒ–ä¸º1ï¼Œ

```c++
#include<bits/stdc++.h>
using namespace std;
 
const int maxn = 1e5+10;
const int maxt = 3700;
bool dp[maxt][maxt];
int a[maxn];
int T, n;
 
int main()
{
    scanf("%d", &T);
    while(T--)
    {
        memset(dp, 0, sizeof(dp));
        scanf("%d", &n);
        for(int i=1;i<=n;i++)
        {
            scanf("%d", &a[i]);
            a[i] %= 3600;
        }
        if(n>=3600)
        {
            printf("YES\n");
            continue;
        }
        for(int i=1;i<=n;i++)
        {
        	if(i!=1) dp[i-1][a[i-1]] = 1;
            for(int j=0;j<=3599;j++)
            {
                dp[i][j] = dp[(i-1)][j] | dp[(i-1)][(j-a[i]+3600)%3600];
            }
        }
        dp[n][a[n]] = 1;
        if(dp[n][0]==1) printf("YES\n");
        else printf("NO\n");
    }
    return 0;
}
```





### åŒºé—´dp

#### å¾…å®Œæˆ

**æ‹¬å·åŒ¹é…**

**æœ€é•¿å›æ–‡å­åºåˆ—é•¿åº¦**

$f[i][j]$è¡¨ç¤º$a_iâ€¦â€¦a_j$çš„ä¸²ä¸­ï¼Œæœ€é•¿å›æ–‡å­åºåˆ—é•¿åº¦

å¦‚æœ$a_i$ä¸$a_j$æ˜¯ä¸€æ ·çš„$f[i][j] = f[i+1][j-1]+2$

å¦åˆ™$f[i][j]=max(f[i+1][j], f[i][j-1])$

**æœ€é•¿å›æ–‡å­ä¸²é•¿åº¦**



**NC 106884 POJ2287 ç”°å¿Œèµ›é©¬**





### ä¹ é¢˜

#### æ²™å †åˆå¹¶

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1031
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

è®¾æœ‰Nå †æ²™å­æ’æˆä¸€æ’ï¼Œå…¶ç¼–å·ä¸º1ï¼Œ2ï¼Œ3ï¼Œâ€¦ï¼ŒN1ï¼Œ2ï¼Œ3ï¼Œ\dots ï¼ŒN1ï¼Œ2ï¼Œ3ï¼Œâ€¦ï¼ŒNï¼ˆNâ‰¤300ï¼‰ï¼ˆN\leq 300ï¼‰ï¼ˆNâ‰¤300ï¼‰ã€‚æ¯å †æ²™å­æœ‰ä¸€å®šçš„æ•°é‡ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªæ•´æ•°æ¥æè¿°ï¼Œç°åœ¨è¦å°†è¿™Nå †æ²™å­åˆå¹¶æˆä¸ºä¸€å †ï¼Œæ¯æ¬¡åªèƒ½åˆå¹¶ç›¸é‚»çš„ä¸¤å †ï¼Œåˆå¹¶çš„ä»£ä»·ä¸ºè¿™ä¸¤å †æ²™å­çš„æ•°é‡ä¹‹å’Œï¼Œåˆå¹¶åä¸è¿™ä¸¤å †æ²™å­ç›¸é‚»çš„æ²™å­å°†å’Œæ–°å †ç›¸é‚»ï¼Œåˆå¹¶æ—¶ç”±äºé€‰æ‹©çš„é¡ºåºä¸åŒï¼Œåˆå¹¶çš„æ€»ä»£ä»·ä¹Ÿä¸ç›¸åŒï¼Œå¦‚æœ‰4å †æ²™å­åˆ†åˆ«ä¸º 1  3  5  2 æˆ‘ä»¬å¯ä»¥å…ˆåˆå¹¶1ã€2å †ï¼Œä»£ä»·ä¸º4ï¼Œå¾—åˆ°4 5 2 åˆåˆå¹¶ 1ï¼Œ2å †ï¼Œä»£ä»·ä¸º9ï¼Œå¾—åˆ°9 2 ï¼Œå†åˆå¹¶å¾—åˆ°11ï¼Œæ€»ä»£ä»·ä¸º4+9+11=24ï¼Œå¦‚æœç¬¬äºŒæ­¥æ˜¯å…ˆåˆå¹¶2ï¼Œ3å †ï¼Œåˆ™ä»£ä»·ä¸º7ï¼Œå¾—åˆ°4 7ï¼Œæœ€åä¸€æ¬¡åˆå¹¶ä»£ä»·ä¸º11ï¼Œæ€»ä»£ä»·ä¸º4+7+11=22ï¼›é—®é¢˜æ˜¯ï¼šæ‰¾å‡ºä¸€ç§åˆç†çš„æ–¹æ³•ï¼Œä½¿æ€»çš„ä»£ä»·æœ€å°ã€‚è¾“å‡ºæœ€å°ä»£ä»·ã€‚

**è¾“å…¥æè¿°**:

```
ç¬¬ä¸€è¡Œä¸€ä¸ªæ•°Nè¡¨ç¤ºæ²™å­çš„å †æ•°Nã€‚
ç¬¬äºŒè¡ŒNä¸ªæ•°ï¼Œè¡¨ç¤ºæ¯å †æ²™å­çš„è´¨é‡(â‰¤1000)(\leq1000)(â‰¤1000)ã€‚
```

**è¾“å‡ºæè¿°**:

```
åˆå¹¶çš„æœ€å°ä»£ä»·
```

**æ€æƒ³&ä»£ç **

å¼±åŒ–ç‰ˆçŸ³å­åˆå¹¶

```c++
#include<bits/stdc++.h>
using namespace std;
#define INF 0x3f3f3f3f

const int maxn = 410;

int dp2[maxn][maxn];
int n, a[maxn], sum[maxn];
int minn = INF;

int getans2(int i, int j)
{
	if(dp2[i][j]>=0) return dp2[i][j];
	dp2[i][j] = INF;
	for(int k=i;k<j;k++)
	{
		dp2[i][j] = min(dp2[i][j], getans2(i, k)+getans2(k+1, j)+sum[j]-sum[i-1]);
	}
	return dp2[i][j];
}

int main()
{
	memset(dp2, -0x3f, sizeof(dp2));
	scanf("%d", &n);
	for(int i=1;i<=n;i++) {dp2[i][i] = 0;}
	for(int i=1;i<=n;i++)
	{
		scanf("%d", &a[i]);
		sum[i] = sum[i-1] + a[i];
	}
	minn = getans2(1, n);
	printf("%d", minn);
	return 0;
}
```



#### NC 50493 çŸ³å­åˆå¹¶

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1030
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

å°†nå †çŸ³å­ç»•åœ†å½¢æ“åœºæ’æ”¾ï¼Œç°è¦å°†çŸ³å­æœ‰åºåœ°åˆå¹¶æˆä¸€å †ã€‚è§„å®šæ¯æ¬¡åªèƒ½é€‰ç›¸é‚»çš„ä¸¤å †åˆå¹¶æˆæ–°çš„ä¸€å †ï¼Œå¹¶å°†æ–°çš„ä¸€å †çš„çŸ³å­æ•°è®°åšè¯¥æ¬¡åˆå¹¶çš„å¾—åˆ†ã€‚
 è¯·ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œè¯»å…¥å †æ•°nåŠæ¯å †çš„çŸ³å­æ•°ï¼Œå¹¶è¿›è¡Œå¦‚ä¸‹è®¡ç®—ï¼š

1. â€‹    é€‰æ‹©ä¸€ç§åˆå¹¶çŸ³å­çš„æ–¹æ¡ˆï¼Œä½¿å¾—åšn-1æ¬¡åˆå¹¶å¾—åˆ†æ€»å’Œæœ€å¤§ã€‚   
2. â€‹    é€‰æ‹©ä¸€ç§åˆå¹¶çŸ³å­çš„æ–¹æ¡ˆï¼Œä½¿å¾—åšn-1æ¬¡åˆå¹¶å¾—åˆ†æ€»å’Œæœ€å°ã€‚   

**è¾“å…¥æè¿°**:

```
è¾“å…¥ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°nï¼Œè¡¨ç¤ºæœ‰nå †çŸ³å­ã€‚
ç¬¬äºŒè¡Œnä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ¯å †çŸ³å­çš„æ•°é‡ã€‚
```

**è¾“å‡ºæè¿°**:

```
ç¬¬ä¸€è¡Œä¸ºåˆå¹¶å¾—åˆ†æ€»å’Œæœ€å°å€¼ï¼Œ
ç¬¬äºŒè¡Œä¸ºåˆå¹¶å¾—åˆ†æ€»å’Œæœ€å¤§å€¼ã€‚
```

å…ˆè€ƒè™‘æ²¡æœ‰ç¯çš„æƒ…å†µï¼š

$f[i][j]$è¡¨ç¤º**åˆå¹¶iåˆ°jçš„æ‰€æœ‰çŸ³å­çš„å¾—åˆ†**

$f[i][j] = max\{f[i][j], f[i][k]+f[k+1][j]+sum[i][j] \}$

$sum[i][j]$è¡¨ç¤ºiåˆ°jçš„å¼å­çš„ä»·å€¼å’Œï¼ˆä¹Ÿå¯ä»¥å‰ç¼€å’Œå®ç°$sum[i]$è¡¨ç¤ºå‰iä¸ªçŸ³å­çš„ä»·å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦çš„å°±æ˜¯$sum[j]-sum[i-1]$ï¼‰

ä½†æ˜¯ç°åœ¨æœ‰ç¯ï¼Œå¯ä»¥é€šè¿‡å–æ¨¡çš„æ–¹æ³•æŠŠå®ƒå˜æˆå¾ªç¯çš„ã€‚

ä¹Ÿå¯ä»¥å°†åºåˆ—åŠ å€ï¼šå˜æˆ'12341234'ï¼Œå°±å¯ä»¥å®Œå…¨ç”¨é“¾çš„æ–¹æ³•è§£å†³äº†ã€‚

è¾¹ç•Œï¼š$f[i][i]=0$

```c++
#include<bits/stdc++.h>
using namespace std;
#define INF 0x3f3f3f3f

const int maxn = 410;

int dp[maxn][maxn], dp2[maxn][maxn];
int n, a[maxn], sum[maxn];
int maxx = -INF, minn = INF;

int getans(int i, int j)
{
	if(dp[i][j]>=0) return dp[i][j];
	for(int k=i;k<j;k++)
	{
		dp[i][j] = max(dp[i][j], getans(i, k)+getans(k+1, j)+sum[j]-sum[i-1]);
	}
	//cout << i << ' ' << j <<' ' << dp[i][j]<< endl;
	return dp[i][j];
}

int getans2(int i, int j)
{
	if(dp2[i][j]>=0) return dp2[i][j];
	dp2[i][j] = INF;
	for(int k=i;k<j;k++)
	{
		dp2[i][j] = min(dp2[i][j], getans2(i, k)+getans2(k+1, j)+sum[j]-sum[i-1]);
	}
	//cout << i << ' ' << j <<' ' << dp2[i][j]<< endl;
	return dp2[i][j];
}

int main()
{
	memset(dp, -0x3f, sizeof(dp));
	memset(dp2, -0x3f, sizeof(dp2));
	scanf("%d", &n);
	for(int i=1;i<=2*n;i++) {dp[i][i] = 0; dp2[i][i] = 0;}
	for(int i=1;i<=n;i++)
	{
		scanf("%d", &a[i]);
		sum[i] = sum[i-1] + a[i];
	}
	for(int i=n+1;i<2*n;i++)
	{
		a[i] = a[i-n];
		sum[i] = sum[i-1] + a[i];
	}
	for(int i=1;i<=n;i++)
	{
		maxx = max(maxx, getans(i, i+n-1));
		minn = min(minn, getans2(i, i+n-1));
	}
	printf("%d\n%d", minn, maxx);
	return 0;
}
```

#### å‡¸å¤šè¾¹å½¢çš„åˆ’åˆ†

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1036
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

ç»™å®šä¸€ä¸ªå…·æœ‰Nä¸ªé¡¶ç‚¹çš„å‡¸å¤šè¾¹å½¢ï¼Œå°†é¡¶ç‚¹ä»1è‡³Næ ‡å·ï¼Œæ¯ä¸ªé¡¶ç‚¹çš„æƒå€¼éƒ½æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ã€‚å°†è¿™ä¸ªå‡¸å¤šè¾¹å½¢åˆ’åˆ†æˆN-2ä¸ªäº’ä¸ç›¸äº¤çš„ä¸‰è§’å½¢ï¼Œè¯•æ±‚è¿™äº›ä¸‰è§’å½¢é¡¶ç‚¹çš„æƒå€¼ä¹˜ç§¯å’Œè‡³å°‘ä¸ºå¤šå°‘ã€‚

**è¾“å…¥æè¿°**:

```
è¾“å…¥ç¬¬ä¸€è¡Œä¸ºé¡¶ç‚¹æ•°N
ç¬¬äºŒè¡Œä¾æ¬¡ä¸ºé¡¶ç‚¹1è‡³é¡¶ç‚¹Nçš„æƒå€¼ã€‚
```

**è¾“å‡ºæè¿°**:

```
è¾“å‡ºä»…ä¸€è¡Œï¼Œä¸ºè¿™äº›ä¸‰è§’å½¢é¡¶ç‚¹çš„æƒå€¼ä¹˜ç§¯å’Œçš„æœ€å°å€¼ã€‚
```

**æ€æƒ³&ä»£ç **

è®¾$f[i][j](i<j)$è¡¨ç¤ºä»é¡¶ç‚¹iåˆ°é¡¶ç‚¹jçš„å‡¸å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†åæ‰€å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸‹é¢çš„åŠ¨æ€è½¬ç§»æ–¹ç¨‹

$f[i][j] = min\{f[i][k]+f[k][j]+s[i]*s[j]*s[k](i<k<j) \}$

æ˜¾ç„¶ç›®æ ‡çŠ¶æ€ä¸º$f[1][n]$

tips:

- è®°å¿†åŒ–æœç´¢ä¼šçˆ†å†…å­˜

- ç­”æ¡ˆç»“æœä¼šå¾ˆå¤§ï¼Œéœ€è¦é«˜ç²¾ï¼Œ__int128æ¨¡æ¿

```c++
#include<bits/stdc++.h>
using namespace std;
typedef __int128 ll;
const int maxn = 55;
__int128 dp[maxn][maxn];
__int128 s[maxn];

inline __int128 read()
{
    __int128 x=0,f=1;
    char ch=getchar();
    while(ch<'0'||ch>'9')
    {
        if(ch=='-')
            f=-1;
        ch=getchar();
    }
    while(ch>='0'&&ch<='9')
    {
        x=x*10+ch-'0';
        ch=getchar();
    }
    return x*f;
}

inline void write(__int128 x)
{
    if(x<0)
    {
        putchar('-');
        x=-x;
    }
    if(x>9)
        write(x/10);
    putchar(x%10+'0');
}

ll getans(int i, int j)
{
	if(dp[i][j]>=0) return dp[i][j];
	dp[i][j] = 1e30;
	for(int k=i;k<=j;k++)
	{
		dp[i][j] = min(dp[i][j], getans(i, k) + getans(k, j) + s[i]*s[j]*s[k]);
	}
	//cout << i << ' ' << j << ' ' << dp[i][j] <<endl;
	return dp[i][j];
}

int main()
{
	int N;
	scanf("%d", &N);
	for(int i=1;i<=N;i++) s[i] = read();
	for(int l=2;l<=N-1;l++)
	{
		for(int i=1;i<=N-l;i++)
		{
			dp[i][i+l] = 1e35;
			for(int k=i;k<=i+l;k++)
			{
				dp[i][i+l] = min(dp[i][i+l], dp[i][k]+dp[k][i+l]+s[i]*s[i+l]*s[k]);
			}
		}
	}
	write(dp[1][N]);
	return 0;
}
```



#### ç®€å•çæé¢˜

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1035
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

  ä¸€å…±æœ‰ nä¸ªæ•°ï¼Œç¬¬ i ä¸ªæ•°æ˜¯ xi 

  xi å¯ä»¥å– [li , ri] ä¸­ä»»æ„çš„ä¸€ä¸ªå€¼ã€‚ 

 è®¾$S=\sum{x_i^2}$ï¼Œæ±‚ S ç§ç±»æ•°ã€‚ã€

**è¾“å…¥æè¿°**:

```
ç¬¬ä¸€è¡Œä¸€ä¸ªæ•° nã€‚ 
ç„¶å n è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•°è¡¨ç¤º li,riã€‚
```

**è¾“å‡ºæè¿°**:

```
è¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•°è¡¨ç¤ºç­”æ¡ˆã€‚
```

**æ€æƒ³&ä»£ç **

$dp[i][j]$è¡¨ç¤ºåœ¨ç¬¬iä¸ªæ•°åSçš„å€¼å¯ä»¥ä¸ºjã€‚

$dp[i][j] |= dp[i-1][j-k*k]ï¼Œ l\le k \le r$

ç”¨boolæ•°ç»„ä¼šå¡ç©ºé—´ï¼Œå› æ­¤ç”¨bitsetè¿›è¡Œä¼˜åŒ–

$dp[i] \;|= dp[i-1] << (k*k)$

ç”¨01æ»šåŠ¨è¿˜å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ç©ºé—´

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn = 110;
const int maxf = maxn*maxn*maxn;
int l, r;
bitset<maxf> dp[2];
int n;

int main()
{
	scanf("%d", &n);
	dp[0][0] = 1;
	for(int i=1;i<=n;i++)
	{
		scanf("%d%d", &l,&r);
		for(int k=l;k<=r;k++)
		{
			dp[1] |= dp[0] << k*k;
		}
		dp[0] = dp[1];
		dp[1].reset();
	}
	printf("%d", dp[0].count());
	return 0;
}
```

#### Tian Ji -- The Horse Racing

Here is a famous story in Chinese history.

> That was about 2300 years ago. General Tian Ji was a high official in the country Qi. He likes to play horse racing with the king and others.
>
> Both of Tian and the king have three horses in different classes, namely, regular, plus, and super. The rule is to have three rounds in a match; each of the horses must be used in one round. The winner of a single round takes two hundred silver dollars from the loser.
>
> Being the most powerful man in the country, the king has so nice horses that in each class his horse is better than Tian's. As a result, each time the king takes six hundred silver dollars from Tian.
>
> Tian Ji was not happy about that, until he met Sun Bin, one of the most famous generals in Chinese history. Using a little trick due to Sun, Tian Ji brought home two hundred silver dollars and such a grace in the next match.
>
> It was a rather simple trick. Using his regular class horse race against the super class from the king, they will certainly lose that round. But then his plus beat the king's regular, and his super beat the king's plus. What a simple trick. And how do you think of Tian Ji, the high ranked official in China?
> ![img](https://te4p0t.github.io/assets/images/typora-user-images/202204262301691.jpeg)


Were Tian Ji lives in nowadays, he will certainly laugh at himself. Even more, were he sitting in the ACM contest right now, he may discover that the horse racing problem can be simply viewed as finding the maximum matching in a bipartite graph. Draw Tian's horses on one side, and the king's horses on the other. Whenever one of Tian's horses can beat one from the king, we draw an edge between them, meaning we wish to establish this pair. Then, the problem of winning as many rounds as possible is just to find the maximum matching in this graph. If there are ties, the problem becomes more complicated, he needs to assign weights 0, 1, or -1 to all the possible edges, and find a maximum weighted perfect matching...

However, the horse racing problem is a very special case of bipartite matching. The graph is decided by the speed of the horses -- a vertex of higher speed always beat a vertex of lower speed. In this case, the weighted bipartite matching algorithm is a too advanced tool to deal with the problem.

In this problem, you are asked to write a program to solve this special case of matching problem.

**Input**

The input consists of up to 50 test cases. Each case starts with a positive integer n ( n<=1000) on the first line, which is the number of horses on each side. The next n integers on the second line are the speeds of Tian's horses. Then the next n integers on the third line are the speeds of the king's horses. The input ends with a line that has a single `0' after the last test case.

**Output**

For each input case, output a line containing a single number, which is the maximum money Tian Ji will get, in silver dollars.

**Sample Input**

```
3
92 83 71
95 87 74
2
20 20
20 20
2
20 19
22 18
0
```

**Sample Output**

```
200
0
0
```

**æ€æƒ³&ä»£ç **

é¦–å…ˆï¼Œè¿™é¢˜æœ‰ä¸€éƒ¨åˆ†è´ªå¿ƒæ€æƒ³ã€‚é¦–å…ˆå°†é½ç‹å’Œç”°å¿Œçš„ğŸéƒ½æŒ‰ç…§é€Ÿåº¦ç”±å¤§åˆ°å°æ’åº

1. å‡è®¾ç”°å¿Œçš„ç¬¬ä¸€åŒ¹ğŸï¼Œå¼±äºé½ç‹ç›®å‰çš„ç¬¬ä¸€åŒ¹ğŸã€‚é‚£ä¹ˆå¯ä»¥ç”¨ç”°å¿Œæœ€å¼±çš„é‚£åŒ¹æ¥è¾“ã€‚è¿™æ ·äº¤æ¢å¯èƒ½æœ‰ä¸¤ç§ç»“æœï¼Œç”°å¿Œæœ€å¼±çš„ä¸€åŒ¹å¼±äºé½ç‹æœ€å¼±çš„ä¸€åŒ¹ ä¸” å½“å‰çš„ç¬¬ä¸€åŒ¹ğŸå¼ºäºé½ç‹æœ€åä¸€åŒ¹ï¼Œèµš200ï¼›å¦åˆ™ï¼Œå’Œæœªäº¤æ¢å‰ä¸€æ ·ã€‚ç¨³èµšä¸äºã€‚ï¼ˆæ—¢ç„¶ä¸€å®šè¦è¾“ï¼Œå°±ç”¨æœ€å¼±çš„ä¸€åŒ¹ğŸå»è¾“ï¼Œç•™ä¸‹æ¥æœ€å¼ºçš„æˆ–è®¸åœ¨ä¹‹åå¯ä»¥å¤šèµ¢ä¸€å±€ï¼Œæœ€å·®ä¹Ÿæ˜¯å’Œä¹‹å‰ç›¸åŒç»“æœï¼Œå› æ­¤äº¤æ¢å³å¯ï¼‰ã€‚
2. ç”°å¿Œçš„ç¬¬ä¸€åŒ¹ğŸå¼ºäºé½ç‹ç¬¬ä¸€åŒ¹ğŸï¼Œæ­¤æ—¶å¹¶ä¸éœ€è¦ç”¨ç”°å¿Œ**æ°å¥½å¤§äºé½ç‹ç¬¬ä¸€åŒ¹ğŸ**çš„ğŸå»äº¤æ¢ï¼Œå› ä¸ºç»“æœç›¸åŒï¼Œå¹¶ä¸ä¼šå› ä¸ºäº¤æ¢è€Œäº§ç”Ÿæ”¶ç›Šã€‚ï¼ˆæ— ç”¨åŠŸï¼‰

ä½†è¿™æ ·çš„è¯æœ‰ä¸€ç§æƒ…å†µä¸å¥½è®¨è®ºï¼Œå³è‹¥å½“å‰é½ç‹çš„ç¬¬ä¸€åŒ¹ğŸå’Œç”°å¿Œçš„ç¬¬ä¸€åŒ¹ğŸå¹³å±€ï¼Œé‚£ä¹ˆäº¤æ¢äº§ç”Ÿçš„æ”¶ç›Šå¯èƒ½ä¸ºæ­£ä¹Ÿå¯èƒ½ä¸ºè´Ÿã€‚

ä¸¾ä¸ªç®€å•çš„ä¾‹å­

```c++
tian: 20 18
king: 20 19
```

è‹¥è¿™ç§æƒ…å†µï¼Œä¸äº¤æ¢çš„è¯ç”°å¿Œ-200ï¼›äº¤æ¢åˆ™0ï¼›äº¤æ¢æ˜¯æ­£æ”¶ç›Šçš„æ“ä½œ

```c++
tian: 20 19
king: 20 18
```

è¿™ç§æƒ…å†µï¼Œäº¤æ¢æ˜¯0ï¼›ä¸äº¤æ¢æ˜¯200ï¼›äº¤æ¢æ˜¯è´Ÿæ”¶ç›Šçš„æ“ä½œã€‚

å› æ­¤å¹³å±€çš„æ—¶å€™ï¼Œæ˜¯å¦è¦è¿›è¡Œäº¤æ¢ï¼Œç”±åç»­çš„çŠ¶æ€å†³å®šã€‚

å› æ­¤è¿™ç§è´ªå¿ƒå¹¶ä¸èƒ½è§£å†³é—®é¢˜ã€‚ä½†æˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªæ€§è´¨ï¼Œå½“é½ç‹çš„ğŸæŒ‰ç…§ç”±å¼ºåˆ°å¼±çš„é¡ºåºä¾æ¬¡å‡ºæˆ˜æ—¶ï¼Œç”°å¿Œåªä¼šç”¨æœ€å¼ºçš„ğŸæˆ–è€…æœ€å¼±çš„ğŸæ¥åº”æˆ˜ã€‚åœ¨ç¬¬kè½®ï¼Œç”°å¿Œå‰©ä½™çš„ğŸä»æ˜¯ä¸€ä¸ªè¿ç»­çš„åŒºé—´ã€‚é‚£ä¹ˆå¯ä»¥è½¬åŒ–ä¸ºä¸€ä¸ªdpé—®é¢˜

è®¾$dp[k][i][j]$è¡¨ç¤ºåœ¨ç¬¬kè½®ç”°å¿Œè¿˜å‰©ä¸‹[i, j]åŒºé—´å†…çš„ğŸæ²¡æœ‰ä¸Šé˜µã€‚

$dp[k][i][j] = max\{dp[k-1][i-1][j]+shouyi(k, i-1), dp[k-1][i][j+1]+shouyi(k, j+1) \}$

åˆæœ‰å…³ç³»å¼$j-i+1+k = n$

æ‰€ä»¥jå¯ä»¥ç”¨n, k, iæ¥è¡¨ç¤ºï¼Œè½¬åŒ–ä¸ºäºŒç»´dpé—®é¢˜ã€‚

```c++
#include<stdio.h>
#include<algorithm>
using namespace std;
#define INF 0x3f3f3f3f
const int maxn = 2010;

int n, tian[maxn], king[maxn];
int dp[maxn][maxn];
int ans = -INF;

bool cmp(int x, int y)
{
	return x>y;
}

int shouyi(int x, int y)
{
	if(king[x]>tian[y]) return -200;
	else if(king[x]==tian[y]) return 0;
	else return 200;
}

int main()
{
	scanf("%d", &n);
	while(n!=0)
	{
		for(int i=1;i<=n;i++) scanf("%d", &tian[i]);
		for(int i=1;i<=n;i++) scanf("%d", &king[i]);
		ans = -INF;
		sort(tian+1, tian+1+n, cmp);
		sort(king+1, king+1+n, cmp);
		// for(int i=1;i<=n;i++) cout << tian[i] << " \n"[i==n];
		// for(int i=1;i<=n;i++) cout << king[i] << " \n"[i==n];
		for(int k=1;k<=n;k++)
		{
			for(int i=1;i<=k+1;i++)
			{
				if(i==1) dp[k][i] = dp[k-1][i] + shouyi(k, n+i-k);
				else if(i==k+1) dp[k][i] = dp[k-1][i-1] + shouyi(k, i-1);
				else dp[k][i] = max(dp[k-1][i-1]+shouyi(k, i-1),
								dp[k-1][i]+shouyi(k, n+i-k));
				//cout << k << ' ' << i <<' ' << dp[k][i] <<endl;
			}
		}
		for(int i=1;i<=n;i++)
		{
			ans = max(ans, dp[n][i]);
		}
		printf("%d\n", ans);
		scanf("%d", &n);
	}
	return 0;
}
```

#### Maxnium sum

**Description**

Given a set of n integers: A={a1, a2,..., an}, we define a function d(A) as below:

![image-20220225135254079](https://te4p0t.github.io/assets/images/typora-user-images/202204262301999.png)

Your task is to calculate d(A).

**Input**

The input consists of T(<=30) test cases. The number of test cases (T) is given in the first line of the input.
Each test case contains two lines. The first line is an integer n(2<=n<=50000). The second line contains n integers: a1, a2, ..., an. (|ai| <= 10000).There is an empty line after each case.

**Output**

Print exactly one line for each test case. The line should contain the integer d(A).

**æ€æƒ³&ä»£ç **

æœ€å¤§å­ä¸²å’Œè¿›é˜¶ç‰ˆæœ¬

æœ€å¤§å­ä¸²å’Œ$dp[i] = max(dp[i-1]+a[i], a[i])$

è®¡ç®—ä¸¤ä¸ªæœ€å¤§å­ä¸²å’Œï¼Œä¸€ä¸ªè¡¨ç¤ºä»¥a\[i\]ä¸ºç»ˆç‚¹çš„æœ€å¤§å­ä¸²å’Œï¼Œä¸€ä¸ªè¡¨ç¤ºä»¥a\[i\]ä¸ºèµ·ç‚¹çš„æœ€å¤§å­ä¸²å’Œã€‚

å†åšä¸€æ¬¡å‰ç¼€æœ€å¤§è®¡ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªè¡¨ç¤ºä»¥åˆ°a\[i\]ä¸ºæ­¢çš„æœ€å¤§å­ä¸²å’Œï¼ˆå¯èƒ½ä¸åŒ…å«a\[i\]ï¼‰ï¼Œå’Œä¸€ä¸ªè¡¨ç¤ºä»a\[i\]å¼€å§‹çš„æœ€å¤§å­ä¸²å’Œï¼ˆå¯èƒ½ä¸åŒ…å«a\[i\]ï¼‰

å†æšä¸¾æ–­ç‚¹è®¡ç®—æœ€å¤§å€¼ã€‚

```c++
#include<stdio.h>
#include<math.h>
#include<iostream>
using namespace std;
#define INF 0x3f3f3f3f
const int maxn = 50010;
int T, n;
int a[maxn];
long long dp1[maxn], dp2[maxn], pre1[maxn], pre2[maxn];
long long ans = -INF;

int main()
{
	scanf("%d", &T);
	while(T--)
	{
		for(int i=0;i<maxn;i++) dp1[i] = dp2[i] = pre1[i] = pre2[i] = -INF;
		ans = -INF;
		scanf("%d", &n);
		for(int i=1;i<=n;i++)
		{
			scanf("%d", &a[i]);
		}
		for(int i=1;i<=n;i++)
		{
			dp1[i] = max(dp1[i-1]+a[i], 1ll*a[i]);
			pre1[i] = max(pre1[i-1], dp1[i]);
		}
		for(int i=n;i>0;i--)
		{
			dp2[i] = max(dp2[i+1]+a[i], 1ll*a[i]);
			pre2[i] = max(pre2[i+1], dp2[i]);
		}
		for(int i=0;i<=n;i++)
		{
			ans = max(ans, dp1[i]+dp2[i+1]);
		}
		for(int i=1;i<n;i++)
		{
			ans = max(ans, pre1[i] + pre2[i+1]);
		}
		printf("%lld\n", ans);
	}
	return 0;
}
```

#### å¤šä¸ªä¸ç›¸äº¤å­—æ®µå’Œé—®é¢˜

- ç»™å®šä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•°ç»„ï¼Œæ±‚åœ¨å…¶ä¸­æ‰¾mä¸ªä¸ç›¸äº¤å­ä¸²å’Œæœ€å¤§å€¼çš„é—®é¢˜

**æ€æƒ³**

- $f[i][j]$è¡¨ç¤ºå‰iä¸ªæ•°ï¼ˆç¬¬iä¸ªæ•°å¿…é¡»å–ï¼‰ç»„æˆjä¸ªä¸ç›¸äº¤å­æ®µæ‰€èƒ½å–å¾—çš„æœ€å¤§å’Œã€‚
- ç¬¬iä¸ªæ•°å¿…é¡»å–æœ‰ä¸¤ç§å¯èƒ½ï¼Œä¸€æ˜¯ä½œä¸ºå‰æ®µå­ä¸²çš„æ–°å…ƒç´ ï¼Œå¦ä¸€æ˜¯ä½œä¸ºä¸€ä¸ªæ–°å­ä¸²çš„èµ·ç‚¹ã€‚
- è‹¥æ˜¯ä½œä¸ºä¸€ä¸ªæ–°å­ä¸²çš„èµ·ç‚¹ï¼Œé‚£ä¹ˆä¸Šä¸€ä¸ªé€‰çš„æ•°å¯èƒ½æ˜¯ä¹‹å‰çš„ä»»æ„ä¸ªæ•°ã€‚
- $f[i][j] = max\{f[i-1][j]+a[i], f[k][j-1]+a[i] \},\quad 1\le k\le i-1$

è¿™æ ·çš„è¯å¤æ‚åº¦æ˜¯$O(n^2*m)$ï¼Œè€ƒè™‘å°†æšä¸¾kçš„å¾ªç¯ä¼˜åŒ–æ‰ã€‚

![image-20220306233303282](https://te4p0t.github.io/assets/images/typora-user-images/202204262301595.png)

æ¯ä¸€æ¬¡çŠ¶æ€çš„è½¬ç§»å®é™…ä¸Šæ˜¯ï¼Œä»è¯¥èŠ‚ç‚¹çš„ä¸Šæ–¹ä¸€æ ¼ï¼Œæˆ–è€…ä»å·¦ä¸Šæ–¹çš„ä¸€åˆ—è½¬ç§»è¿‡æ¥ã€‚å·¦ä¸Šæ–¹çš„ä¸€åˆ—å°±æ˜¯å¯¹kçš„å¾ªç¯ï¼Œè€Œè¿™ä¸ªå¾ªç¯å¯ä»¥ç”¨ä¸€ä¸ªå‰ç¼€æœ€å¤§å€¼æ•°ç»„æ¥ä¼˜åŒ–æ‰ã€‚

$f[i][j] = max\{f[i-1][j]+a[i], maxn[i-1][j-1]+a[i] \}$

**æˆ–è€…**

åœ¨çŠ¶æ€ä¸­åŠ ä¸€ä¸ªç»´åº¦

$f[i][j][1/0]$è¡¨ç¤ºç¬¬iä¸ªæ•°é€‰ï¼ˆ1ï¼‰ï¼Œä¸é€‰ï¼ˆ0ï¼‰ï¼Œç»„æˆjä¸ªä¸ç›¸äº¤å­ä¸²å’Œæœ€å¤§å€¼ã€‚

$f[i][j][0] = max\{f[i-1][j][0] + f[i-1][j][1] \}$

$f[i][j][1] = max\{f[i-1][j][1]+a[i], f[i-1][j-1][0]+a[i], f[i-1][j-1][1]+a[i]  \}$

å®é™…ä¸Šå¤šåŠ äº†ä¸€ä¸ªçŠ¶æ€ä¸­ï¼Œ$f[i][j][0]+f[i][j][1]$çš„å€¼å°±æ˜¯ä¸Šä¸€ç§æ–¹æ³•ä¸­çš„$maxn[i][j]$

#### å¤šä¸ªä¸ç›¸äº¤å­—æ®µå’Œé—®é¢˜ï¼ˆç¯çŠ¶ï¼Ÿï¼‰

è€ƒè™‘å°†ç¯ä»1ï¼Œnä¹‹é—´æ–­å¼€

å‡è®¾é€‰mä¸ªåŒºé—´ï¼Œä¸¤ç§æƒ…å†µ

1. é€‰å–åŒºé—´åï¼Œåœ¨æ–­ç‚¹å‡ºæ— åŒºé—´ï¼Œåˆ™å’Œä¸Šé¢˜ä¸€æ ·ã€‚
2. é€‰å–åŒºé—´åï¼Œæœ‰ä¸€ä¸ªåŒºé—´ä¸­åŒ…å«æ–­ç‚¹ã€‚
   - åŒ…å«æ–­ç‚¹çš„æƒ…å†µï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨1, nä¸­é—´é€‰m+1ä¸ªåŒºé—´ï¼Œå…¶ä¸­1å’Œnå¿…é€‰ã€‚
   - çŠ¶æ€å’Œä¸Šé¢˜ä¸€è‡´$f[i][j][0/1]$ï¼Œåªéœ€ç‰¹æ®Šåˆ¤æ–­$f[i][1][1]$ä¸ºå­ä¸²å‰ç¼€å’Œï¼Œ$f[i][1][0] = max\{f[i-1][1][1], f[i-1][1][0] \}$,åŒæ—¶æœ€åæ±‚è§£ç­”æ¡ˆæ—¶æ±‚çš„æ˜¯$f[n][m+1][1]$



### ç»¼åˆä¹ é¢˜

- 

#### æ‹¦æˆªå¯¼å¼¹

**æ€æƒ³&ä»£ç **

ç¬¬ä¸€é—®æ±‚æœ€é•¿ä¸ä¸Šå‡å­åºåˆ—ã€‚

ç¬¬äºŒé—®æœ€ç›´è§‚çš„æ–¹æ³•ï¼šæ±‚å®Œä¸€æ¬¡ä¸ä¸Šå‡å­åºåˆ—åæŠŠåˆšæ‰è¦æ‰“çš„å¯¼å¼¹å»æ‰ï¼Œå†æ±‚ä¸€æ¬¡æœ€é•¿ä¸ä¸Šå‡å­åºåˆ—ç›´åˆ°æ‰“å®Œæ‰€æœ‰çš„å¯¼å¼¹ã€‚

ä½†æ˜¯å­˜åœ¨åä¾‹

```c++
6 1 7 3 2
é”™è§£ï¼š6 3 2/1/7
æ­£è§£ï¼š6 1/7 3 2
```

å®šç†ï¼š**å®Œæ•´è¦†ç›–ä¸€ä¸ªåºåˆ—çš„ä¸ä¸Šå‡å­åºåˆ—çš„ä¸ªæ•°ç­‰äºè¿™ä¸ªåºåˆ—çš„æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦ã€‚**

ä¸¥æ ¼è¯æ˜è¦å‚è€ƒååºé›†çš„Dilworthå®šç†ã€‚

æ¯”è¾ƒéšæ„çš„è¯æ˜æ–¹æ³•

å‡è®¾è¯¥åºåˆ—æœ€é•¿ä¸Šå‡å­åºåˆ—é•¿åº¦ä¸ºkã€‚åˆ™è¯¥æœ€é•¿ä¸Šå‡å­åºåˆ—ä¸­çš„æ¯ä¸€ä¸ªå¯¼å¼¹è‡³å°‘éœ€è¦ä¸€ä¸ªç³»ç»Ÿï¼Œæ‰€ä»¥ç³»ç»Ÿæ•°é‡æœ€å°åº”ä¸ºkã€‚

ä¸‹é¢è¯æ˜ç³»ç»Ÿæ•°é‡æœ€å¤§åº”ä¸ºkï¼š

- å‡è®¾kä¸ªç³»ç»Ÿä¸èƒ½è¦†ç›–æ‰€æœ‰å¯¼å¼¹ã€‚

- å‡è®¾ç°æœ‰kå¥—ç³»ç»Ÿè¦†ç›–äº†éƒ¨åˆ†å¯¼å¼¹ï¼Œå¦‚æœç¬¬k+1å¥—ç³»ç»Ÿè¦†ç›–çš„ç¬¬ä¸€æšå¯¼å¼¹åœ¨åºåˆ—å¼€å¤´ã€‚

  1. è‹¥å®ƒçš„é«˜åº¦å¤§äºç­‰äºä¸‹ä¸€ä¸ªæœ€è¿‘çš„å¦ä¸€å¥—ç³»ç»Ÿè¦†ç›–çš„å¯¼å¼¹ï¼Œåˆ™å¯ä»¥å½’åˆ°å¦ä¸€å¥—ç³»ç»Ÿä¸­ï¼›
  2. è‹¥å°äºçš„è¯ï¼Œåˆ™æœ€é•¿ä¸Šå‡å­åºåˆ—é•¿åº¦å°±åº”è¯¥æ˜¯k+1ï¼Œä¸å‡è®¾çŸ›ç›¾ã€‚

- è‹¥ç¬¬k+1å¥—ç³»ç»Ÿè¦†ç›–çš„ç¬¬ä¸€æšå¯¼å¼¹åœ¨æŸä¸¤åºåˆ—ä¸­é—´ã€‚è¿™ä¸¤åºåˆ—ä¸­å‰ä¸€ä¸ªåºåˆ—ç¬¬ä¸€ä¸ªå¯¼å¼¹åº”å½“å°äºåä¸€ä¸ªåºåˆ—çš„ç¬¬ä¸€ä¸ªå¯¼å¼¹é«˜åº¦ã€‚

  1. è‹¥k+1å¥—ç³»ç»Ÿè¦†ç›–çš„ç¬¬ä¸€æšå¯¼å¼¹çš„é«˜åº¦é«˜äºåä¸€ä¸ªç³»ç»Ÿçš„ç¬¬ä¸€ä¸ªå¯¼å¼¹ï¼Œåˆ™å¯ä»¥åˆå¹¶åˆ°åä¸€ä¸ªç³»ç»Ÿä¸­ã€‚
  2. è‹¥k+1å¥—ç³»ç»Ÿè¦†ç›–çš„ç¬¬ä¸€æšå¯¼å¼¹é«˜åº¦åœ¨å·¦å³ä¸¤ç³»ç»Ÿç¬¬ä¸€ä¸ªå¯¼å¼¹çš„é«˜åº¦ä¹‹é—´ï¼Œåˆ™æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦åº”ä¸ºk+1ï¼Œä¸å‡è®¾çŸ›ç›¾ã€‚
  3. è‹¥k+1å¥—ç³»ç»Ÿè¦†ç›–çš„ç¬¬ä¸€æšå¯¼å¼¹é«˜åº¦å°äºå·¦ç³»ç»Ÿç¬¬ä¸€ä¸ªå¯¼å¼¹é«˜åº¦ï¼Œé‚£å®ƒå¿…é¡»å°äºè¯¥ç³»ç»Ÿä¸­æ‰€æœ‰åœ¨ä»–å·¦è¾¹çš„å¯¼å¼¹çš„é«˜åº¦ï¼ˆå¦åˆ™æœ€é•¿ä¸Šå‡å­åºåˆ—é•¿åº¦k+1ï¼‰ï¼Œé‚£ä¹ˆè¯¥æšå¯¼å¼¹å¯ä»¥è¢«åˆå¹¶åˆ°å·¦ä¾§çš„ç³»ç»Ÿä¸­ã€‚

  ç»¼ä¸Šæ‰€è¿°ï¼Œç³»ç»Ÿæ•°é‡æœ€å¤§åº”ä¸ºkã€‚

  æ‰€ä»¥ç³»ç»Ÿæ•°é‡ä¸ºkã€‚

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn = 1e5+10;
int h[maxn];
int dp1[maxn], dp2[maxn];
int cnt=0, ans1, ans2;

int main()
{
	memset(dp1, 0, sizeof(dp1));
	while(scanf("%d", &h[++cnt])!=EOF)
	{
		dp1[cnt] = 1;
		dp2[cnt] = 1;
		for(int i=1;i<cnt;i++)
		{
			if(h[i]<h[cnt]) dp1[cnt] = max(dp1[cnt], dp1[i]+1);
			if(h[i]>=h[cnt]) dp2[cnt] = max(dp2[cnt], dp2[i]+1);
			ans2 = max(ans2, dp1[cnt]);
			ans1 = max(ans1, dp2[cnt]);
		}
	}
	// for(int i=1;i<=cnt;i++) cout << dp1[i] << " \n"[i==cnt];
	// for(int i=1;i<=cnt;i++) cout << dp2[i] << " \n"[i==cnt];
	printf("%d\n%d", ans1, ans2);
	return 0;
}
```

#### æ•°å­¦è€ƒè¯•

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1013
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

ä»Šå¤©qwbè¦å‚åŠ ä¸€ä¸ªæ•°å­¦è€ƒè¯•ï¼Œè¿™å¥—è¯•å·ä¸€å…±æœ‰né“é¢˜ï¼Œæ¯é“é¢˜qwbèƒ½è·å¾—çš„åˆ†æ•°ä¸ºaiï¼Œqwbå¹¶ä¸æ‰“ç®—æŠŠè¿™äº›é¢˜å…¨åšå®Œï¼Œ
 ä»–æƒ³é€‰æ€»å…±2ké“é¢˜æ¥åšï¼Œå¹¶ä¸”æœŸæœ›ä»–èƒ½è·å¾—çš„åˆ†æ•°å°½å¯èƒ½çš„å¤§ï¼Œä»–å‡†å¤‡é€‰2ä¸ªä¸è¿ç»­çš„é•¿åº¦ä¸ºkçš„åŒºé—´,
 å³[L,L+1,L+2,....,L+k-1]ï¼Œ[R,R+1,R+2,...,R+k-1]ï¼ˆR >= L+kï¼‰ã€‚

**è¾“å…¥æè¿°**:

```
ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°Tï¼ˆT<=10ï¼‰,ä»£è¡¨æœ‰Tç»„æ•°æ®
æ¥ä¸‹æ¥ä¸€è¡Œä¸¤ä¸ªæ•´æ•°n,k,(2<=n<=200,000),(1<=k,2k <= n)
æ¥ä¸‹æ¥ä¸€è¡Œnä¸ªæ•´æ•°a1,a2,...,anï¼Œï¼ˆ-100,000<=ai<=100,000ï¼‰
```

**è¾“å‡ºæè¿°**:

```
è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œqwbèƒ½è·å¾—çš„æœ€å¤§åˆ†æ•°
```

**æ€æƒ³&ä»£ç **

é¦–å…ˆè€ƒè™‘ç”¨å‰ç¼€å’Œæ•°ç»„preæ–¹ä¾¿è®¡ç®—ké•¿åº¦åŒºé—´å’Œã€‚

ä¹‹åå¼€ä¸¤ä¸ªdp

$dp1[i]$è¡¨ç¤ºä»¥iæˆ–å¤§äºiçš„æ•°ä¸ºèµ·ç‚¹ï¼ŒåŒºé—´é•¿åº¦ä¸ºkçš„æœ€å¤§åŒºé—´å’Œã€‚

$dp2[i]$è¡¨ç¤ºä»¥iæˆ–å°äºiçš„æ•°ä¸ºç»ˆç‚¹ï¼ŒåŒºé—´é•¿åº¦ä¸ºkçš„æœ€å¤§åŒºé—´å’Œã€‚

$dp1[i] = max(dp1[i+1], pre[i+k-1]-pre[i-1])$

$dp2[i] = max(dp2[i-1], pre[i]-pre[i-k])$

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn = 2e5+10;

int T, n, k;
long long a[maxn], dp1[maxn], dp2[maxn], pre[maxn];
long long ans=-1e15;


int main()
{
	scanf("%d", &T);
	while(T--)
	{
		ans = -1e15;
		scanf("%d%d", &n, &k);
		for(int i=1;i<=n;i++)
		{
			scanf("%lld", &a[i]);
			pre[i] = pre[i-1] + a[i];
		}
		// for(int i=1;i<=n;i++) cout << pre[i] <<" ";
		// cout <<end
		memset(dp1, -0x3f, sizeof(dp1));
		memset(dp2, -0x3f, sizeof(dp2));
		for(int i=n-k+1;i>=1;i--)
		{
			dp1[i] = max(dp1[i+1], pre[i+k-1]-pre[i-1]);
		}
		for(int i=k;i<=n;i++) dp2[i] = max(dp2[i-1], pre[i]-pre[i-k]);
// 		for(int i=1;i<=n;i++) cout << dp1[i] <<" ";
// 		cout << endl;
// 		for(int i=1;i<=n;i++) cout <<dp2[i] << " ";
// 		cout << endl;
		for(int i=1;i<n;i++)
		{
			ans = max(ans, dp1[i+1] + dp2[i]);
		}
		printf("%lld\n", ans);
	}
	return 0;
}
```

å½“ç„¶åªå¼€ä¸€ä¸ªdpæ•°ç»„ä¹Ÿå¯ã€‚

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn = 2e5+10;

int T, n, k;
long long a[maxn], dp1[maxn], dp2[maxn], pre[maxn];
long long ans=-1e15;


int main()
{
	scanf("%d", &T);
	while(T--)
	{
		ans = -1e15;
		scanf("%d%d", &n, &k);
		for(int i=1;i<=n;i++)
		{
			scanf("%lld", &a[i]);
			pre[i] = pre[i-1] + a[i];
		}
		memset(dp2, -0x3f, sizeof(dp2));
		for(int i=k;i<=n;i++) dp2[i] = max(dp2[i-1], pre[i]-pre[i-k]);
		for(int i=1;i<=n-k;i++)
		{
			ans = max(ans, dp2[i]+pre[i+k]-pre[i]);
		}
		printf("%lld\n", ans);
	}
	return 0;
}
```

#### å°Aä¹°å½©ç¥¨

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1014
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

å°Aæœ€è¿‘å¼€å§‹æ²‰è¿·ä¹°å½©ç¥¨ï¼Œå¹¶ä¸”å¸Œæœ›èƒ½å¤Ÿé€šè¿‡ä¹°å½©ç¥¨å‘å®¶è‡´å¯Œã€‚å·²çŸ¥è´­ä¹°ä¸€å¼ å½©ç¥¨éœ€è¦3å…ƒï¼Œè€Œå½©ç¥¨ä¸­å¥–çš„é‡‘é¢åˆ†åˆ«ä¸º1,2,3,4å…ƒï¼Œå¹¶ä¸”æ¯”è¾ƒç‹¬ç‰¹çš„æ˜¯è¿™ä¸ªå½©ç¥¨ä¸­å¥–çš„å„ç§é‡‘é¢éƒ½æ˜¯ç­‰å¯èƒ½çš„ã€‚ç°åœ¨å°Aè¿ç»­è´­ä¹°äº†nå¼ å½©ç¥¨ï¼Œä»–å¸Œæœ›ä½ èƒ½å¤Ÿå‘Šè¯‰ä»–è‡³å°‘èƒ½å¤Ÿä¸äºæœ¬çš„æ¦‚ç‡æ˜¯å¤šå°‘ã€‚

**è¾“å…¥æè¿°**:

```
ä¸€è¡Œä¸€ä¸ªæ•´æ•°Nï¼Œä¸ºå°Aè´­ä¹°çš„å½©ç¥¨æ•°é‡ä¸€è¡Œä¸€ä¸ªæ•´æ•°Nï¼Œä¸ºå°Aè´­ä¹°çš„å½©ç¥¨æ•°é‡ä¸€è¡Œä¸€ä¸ªæ•´æ•°Nï¼Œä¸ºå°Aè´­ä¹°çš„å½©ç¥¨æ•°é‡
```

**è¾“å‡ºæè¿°**:

```
è¾“å‡ºä¸€ä¸ªæœ€ç®€åˆ†æ•°a/bï¼Œè¡¨ç¤ºå°Aä¸äºæœ¬çš„æ¦‚ç‡ã€‚è‹¥æ¦‚ç‡ä¸º1ï¼Œåˆ™è¾“å‡º1/1ï¼Œæ¦‚ç‡ä¸º0ï¼Œåˆ™è¾“å‡º0/1ã€‚è¾“å‡ºä¸€ä¸ªæœ€ç®€åˆ†æ•°a/bï¼Œè¡¨ç¤ºå°Aä¸äºæœ¬çš„æ¦‚ç‡ã€‚
\\è‹¥æ¦‚ç‡ä¸º1ï¼Œåˆ™è¾“å‡º1/1ï¼Œæ¦‚ç‡ä¸º0ï¼Œåˆ™è¾“å‡º0/1ã€‚è¾“å‡ºä¸€ä¸ªæœ€ç®€åˆ†æ•°a/bï¼Œè¡¨ç¤ºå°Aä¸äºæœ¬çš„æ¦‚ç‡ã€‚è‹¥æ¦‚ç‡ä¸º1ï¼Œåˆ™è¾“å‡º1/1ï¼Œæ¦‚ç‡ä¸º0ï¼Œåˆ™è¾“å‡º0/1ã€‚
```

**æ€æƒ³&ä»£ç **

è®¾$dp[i][j]$è¡¨ç¤ºä¹°åˆ°ç¬¬iä¸ªå½©ç¥¨æ—¶ï¼Œå°Aå‡€æ”¶ç›Š100+jå…ƒçš„æ–¹æ¡ˆæ•°ã€‚

é‚£ä¹ˆ$dp[i][j] = \sum\limits_{k=j-1}^{j+2}dp[i-1][k]$

ç­”æ¡ˆç”¨æ–¹æ¡ˆæ•°é™¤ä»¥æ€»æ•°$4^n$å³å¯

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn = 35;

long long n, dp[maxn][201];
long long ans = 0;


int main()
{
	scanf("%lld", &n);
	dp[0][100] = 1;
	for(int i=1;i<=n;i++)
	{
		for(int j=1;j<=198;j++)
		{
			dp[i][j] = dp[i-1][j-1] + dp[i-1][j] + dp[i-1][j+1] + dp[i-1][j+2];
		}
	}
	// for(int i=1;i<=n;i++)
	// {
		// for(int j=80;j<=120;j++)
		// cout << dp[i][j] << " ";
		// cout << endl;
	// }
	for(int i=100;i<=200;i++)
	{
		ans += dp[n][i];
	}
	//cout << ans << ' ' << pow(4, n) << ' ' << gcd(ans, pow(4, n)) << ' ' << pow(4, n) / gcd(ans, pow(4, n))<< endl;
	printf("%lld/%lld", ans/__gcd(ans, (long long)pow(4, n)), (long long)pow(4, n) / __gcd(ans, (long long)pow(4, n)));
	return 0;
}
```

#### è´­ç‰©

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1015
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

   åœ¨é¥è¿œçš„ä¸œæ–¹ï¼Œæœ‰ä¸€å®¶ç³–æœä¸“å–åº—ã€‚  

   è¿™å®¶ç³–æœåº—å°†ä¼šåœ¨æ¯å¤©å‡ºå”®ä¸€äº›ç³–æœï¼Œå®ƒæ¯å¤©éƒ½ä¼šç”Ÿäº§å‡ºmä¸ªç³–æœï¼Œç¬¬iå¤©çš„ç¬¬jä¸ªç³–æœä»·æ ¼ä¸ºC[i][j]å…ƒã€‚  

   ç°åœ¨çš„ä½ æƒ³è¦åœ¨æ¥ä¸‹æ¥çš„nå¤©å»ç³–æœåº—è¿›è¡Œé€‰è´­ï¼Œä½ æ¯å¤©å¯ä»¥ä¹°å¤šä¸ªç³–æœï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸ä¹°ç³–æœï¼Œä½†æ˜¯æœ€å¤šä¹°mä¸ªã€‚ï¼ˆå› ä¸ºæœ€å¤šåªç”Ÿäº§mä¸ªï¼‰ä¹°æ¥ç³–æœä»¥åï¼Œä½ å¯ä»¥é€‰æ‹©åƒæ‰ç³–æœæˆ–è€…ç•™ç€ä¹‹åå†åƒã€‚ç³–æœä¸ä¼šè¿‡æœŸï¼Œä½ éœ€è¦ä¿è¯è¿™nå¤©ä¸­æ¯å¤©ä½ éƒ½èƒ½åƒåˆ°è‡³å°‘ä¸€ä¸ªç³–æœã€‚  

   è¿™å®¶åº—çš„è€æ¿çœ‹ä½ ç»å¸¸å»å…‰é¡¾è¿™å®¶åº—ï¼Œæ„Ÿåˆ°éå¸¸ç”Ÿæ°”ã€‚ï¼ˆå› ä¸ºä»–ä¸èƒ½å¥½å¥½ç¡è§‰äº†ï¼‰äºæ˜¯ä»–ä¼šé¢å¤–çš„è¦æ±‚ä½ æ”¯ä»˜ç‚¹é’±ã€‚å…·ä½“æ¥è¯´ï¼Œä½ åœ¨æŸä¸€å¤©è´­ä¹°äº† k ä¸ªç³–æœï¼Œé‚£ä¹ˆä½ åœ¨è¿™ä¸€å¤©éœ€è¦é¢å¤–æ”¯ä»˜ k2 çš„è´¹ç”¨ã€‚  

   é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä½ æœ€å°‘éœ€è¦å¤šå°‘é’±æ‰èƒ½è¾¾æˆè‡ªå·±çš„ç›®çš„å‘¢ï¼Ÿ  

 **è¾“å…¥æè¿°**:

```
ç¬¬ä¸€è¡Œä¸¤ä¸ªæ­£æ•´æ•°nå’Œmï¼Œåˆ†åˆ«è¡¨ç¤ºå¤©æ•°ä»¥åŠç³–æœåº—æ¯å¤©ç”Ÿäº§çš„ç³–æœæ•°é‡ã€‚
æ¥ä¸‹æ¥nè¡Œï¼ˆç¬¬2è¡Œåˆ°ç¬¬n+1è¡Œï¼‰ï¼Œæ¯è¡Œmä¸ªæ­£æ•´æ•°ï¼Œç¬¬x+1è¡Œçš„ç¬¬yä¸ªæ­£æ•´æ•°è¡¨ç¤ºç¬¬xå¤©çš„ç¬¬yä¸ªç³–æœçš„è´¹ç”¨ã€‚
```

**è¾“å‡ºæè¿°**:

```
è¾“å‡ºåªæœ‰ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºä½ éœ€è¦æ”¯ä»˜çš„æœ€å°è´¹ç”¨ã€‚
```

**æ€æƒ³&ä»£ç **

è¯¥é¢˜ä¸­åŒ…å«éƒ¨åˆ†è´ªå¿ƒçš„æ€æƒ³ï¼š

è‹¥ç¬¬iå¤©è¦ä¹°kä¸ªç³–æœï¼Œé‚£ä¹ˆå¿…å®šé€‰ä»·å€¼æœ€å°çš„å‰kä¸ªã€‚ç”¨ä¸€ä¸ªå‰ç¼€å’Œç»´æŠ¤ä¸€ä¸‹å‰kä¸ªç³–æœä»£ä»·ã€‚

è®¾$dp[i][j]$ä»£è¡¨ç¬¬iå¤©æœ‰jä¸ªç³–æœçš„æœ€å°ä»£ä»·ï¼Œåˆ™çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸º

$dp[i][j] = min\{dp[i-1][j], \sum\limits_{k=i-1}^{n} dp[i-1][k] + pre[j-k] + (j-k)^2 \}$

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn = 310;
int dp[maxn][maxn];
int a[maxn], n, m;

int main()
{
	scanf("%d%d", &n, &m);
	memset(dp, 0x3f, sizeof(dp));
	dp[0][0] = 0;
	for(int i=1;i<=n;i++)
	{
		for(int j=1;j<=m;j++)
		{
			scanf("%d", &a[j]);
		}
		sort(a+1, a+m+1);
		for(int j=2;j<=m;j++)
		{
			a[j] += a[j-1];
		}
		for(int j=i;j<=n;j++)
		{
			dp[i][j] = dp[i-1][j];
			for(int k=i-1;k<=n;k++)
			{
				dp[i][j] = min(dp[i][j], dp[i-1][k] + a[j-k] + (j-k)*(j-k));
			}
		}
	}
	printf("%d", dp[n][n]);
	return 0;
}
```

#### ç‰›ç‰›çš„æ—…æ¸¸çºªå¿µå“

é“¾æ¥ï¼šhttps://ac.nowcoder.com/acm/contest/24213/1016
æ¥æºï¼šç‰›å®¢ç½‘

**é¢˜ç›®æè¿°**                    

  ç‰›ç‰›åœ¨ç‰›å¸‚çš„æ—…æ¸¸çºªå¿µå•†åº—é‡Œé¢æŒ‘èŠ±äº†çœ¼ï¼Œäºæ˜¯ç®€å•ç²—æš´çš„ç‰›ç‰›å†³å®šâ€”â€”ä¹°æœ€å—æ¬¢è¿çš„å°±å¥½äº†ã€‚ 

  ä½†æ˜¯ç‰›ç‰›çš„èƒŒåŒ…æœ‰é™ï¼Œä»–åªèƒ½åœ¨å•†åº—çš„nä¸ªç‰©å“é‡Œé¢å¸¦mä¸ªå›å»ï¼Œä¸ç„¶å°±è£…ä¸ä¸‹äº†ã€‚ 

  å¹¶ä¸”ç‰›ç‰›å¸Œæœ›ä¹°åˆ°çš„çºªå¿µå“ä¸è¦å¤ªç›¸ä¼¼ï¼Œæ‰€ä»¥å¯¼è´­å°å§å§å¸®åŠ©ç‰›ç‰›æŠŠçºªå¿µå“å…¨éƒ¨æ’æˆäº†ä¸€è¡Œï¼Œç‰›ç‰›åªéœ€è¦è®©é€‰å‡ºæ¥è¦ä¹°çš„mä¸ªç‰©å“ä¸­ä»»æ„ä¸¤ä¸ªçš„ä½ç½®å·®éƒ½å¤§äºç­‰äºkå°±è¡Œäº†ã€‚ 

  ç°åœ¨å‘Šè¯‰ä½ è¿™nä¸ªç‰©å“æ’æˆä¸€è¡Œä¹‹åçš„å—æ¬¢è¿ç¨‹åº¦ï¼ˆå¯èƒ½æ˜¯è´Ÿæ•°ï¼‰ï¼Œæ±‚ç‰›ç‰›å¸¦å›å»çš„mä¸ªç‰©å“çš„æœ€å¤§æ¬¢è¿åº¦ä¹‹å’Œã€‚ 

**è¾“å…¥æè¿°**:

```
 ç¬¬ä¸€è¡Œä¸‰ä¸ªæ•°n,m,k æ¥ä¸‹æ¥ä¸€è¡Œ,æœ‰nä¸ªæ•´æ•°,æ˜¯nä¸ªç‰©å“æŒ‰é¡ºåºçš„å—æ¬¢è¿ç¨‹åº¦ã€‚
```

**è¾“å‡ºæè¿°**:

```
è¾“å‡ºä¸€ä¸ªæ•°ä¸ºé¢˜ç›®æ‰€æ±‚çš„æœ€å¤§å’Œ
```

**æ€æƒ³&ä»£ç **

è®¾$dp[i][j]$è¡¨ç¤ºç¬¬iä¸ªç‰©å“é€‰åœ¨jä½ç½®ï¼Œåˆ™æœ‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹

$dp[i][j] = {pre[i-1][t] + a[j] }$

å…¶ä¸­preä¸ºå‰ç¼€æœ€å¤§å€¼ï¼Œè¡¨ç¤ºç¬¬iä¸ªç‰©å“ï¼Œåœ¨jä½ç½®å‰æœ€å°çš„ä»£ä»·å’Œã€‚

```c++
#include<bits/stdc++.h>
using namespace std;

const int maxn=1e4+10;
const int maxm=110;
int a[maxn];
int dp[maxm][maxn], n, m, k;
int pre[maxm][maxn];

int main()
{
	scanf("%d%d%d", &n, &m, &k);
	for(int i=1;i<=n;i++) scanf("%d", &a[i]);
	memset(pre, 0xe3, sizeof(pre));
	for(int i=1;i<=m;i++)
	{
		for(int j=(i-1)*k+1;j<=n;j++)
		{
			if(i==1) dp[i][j] = a[j];
			else dp[i][j] = max(dp[i][j], dp[i-1][j-k] + a[j]);
			pre[i][j] = max(dp[i][j], pre[i][j-1]);
		}
	}
	printf("%d", pre[m][n]);
	return 0;
}
```



#### ä¸‰ä¸ªä¸²çš„æœ€é•¿å…¬å…±å­åºåˆ—

- ç»™å®šä¸‰ä¸ªä¸²ï¼Œæ±‚å…¶æœ€é•¿å…¬å…±å­åºåˆ—ï¼Œè¾“å‡ºæœ€é•¿å…¬å…±å­åºåˆ—çš„æ–¹æ¡ˆã€‚

**æ€æƒ³**

$f[i][j][k]$è¡¨ç¤ºç¬¬ä¸€ä¸ªä¸²å‰iä¸ªå­—ç¬¦ï¼Œç¬¬äºŒä¸ªä¸²å‰jä¸ªå­—ç¬¦ï¼Œç¬¬ä¸‰ä¸ªä¸²å‰kä¸ªå­—ç¬¦ã€‚

$a[i]==b[i]==c[i]$ï¼Œ$f[i][j][k] = f[i-1][j-1][k-1]+1$

else $f[i][j][k] = max\{f[i-1][j][k], f[i][j-1][k], f[i][j][k-1] \}$

å¦‚ä½•æ±‚å¾—æ–¹æ¡ˆï¼Ÿ

1. å¯ä»¥ç”¨ä¸€ä¸ªæ•°$last[i][j][k]$æ±‚å½“å‰æ–¹æ¡ˆæ˜¯ç”±å“ªä¸€ä¸ªçŠ¶æ€è½¬ç§»è¿‡æ¥çš„ã€‚
2. ç›´æ¥å°†$f[i][j][k]$å¼€æˆå­—ç¬¦ä¸²ï¼Œè®°å½•å½“å‰å…¬å…±å­åºåˆ—ã€‚

#### æœ€å¤§å­çŸ©é˜µ

- åœ¨ä¸€ä¸ªçŸ©é˜µä¸­æ‰¾åˆ°ä¸€ä¸ªå­çŸ©é˜µï¼Œè¯¥å­çŸ©é˜µå’Œæœ€å¤§ï¼Œè¾“å‡ºæœ€å¤§å’Œã€‚

**æ€æƒ³**

äºŒç»´å‰ç¼€å’Œï¼Œæ±‚çš„è¯å¤æ‚åº¦æ˜¯$O(n^2)$

ä¼˜åŒ–ï¼š

- æšä¸¾è¡Œï¼ˆå­çŸ©é˜µä»ç¬¬iè¡Œåˆ°ç¬¬jè¡Œï¼Œiå’Œjéƒ½è¦æšä¸¾ï¼‰
- ç„¶åæŠŠç¬¬iè¡Œåˆ°ç¬¬jè¡Œå‹æˆä¸€è¡Œï¼ˆé€šè¿‡å¯¹æ¯ä¸€åˆ—æ±‚å‰ç¼€å’Œå®ç°ï¼‰
- å¯¹å¾—åˆ°çš„ä¸€è¡Œæ±‚æœ€å¤§å­ä¸²å’Œ

#### éª¨ç‰Œ

- å¤šç±³è¯ºéª¨ç‰Œæœ‰ä¸Šä¸‹ä¸¤ä¸ªæ–¹å—ç»„æˆï¼Œæ¯ä¸ªæ–¹å—ä¸­æœ‰1~6ä¸ªç‚¹ã€‚ç°æœ‰æ’æˆè¡Œçš„ä¸Šæ–¹å—ä¸­ç‚¹æ•°ä¹‹å’Œè®°ä¸ºS1ï¼Œä¸‹æ–¹å—ä¸­ç‚¹æ•°ä¹‹å’Œè®°ä¸ºS2ï¼Œä»–ä»¬çš„å·®ä¸º|S1-S2|ã€‚ä¾‹å¦‚åœ¨å›¾8-1ä¸­ï¼ŒS1=6+1+1+1=9ï¼ŒS2=1+5+3+2=11ï¼Œ|S1-S2|=2ã€‚æ¯ä¸ªå¤šç±³è¯ºéª¨ç‰Œå¯ä»¥æ—‹è½¬180Â°ï¼Œä½¿å¾—ä¸Šä¸‹ä¸¤ä¸ªæ–¹å—äº’æ¢ä½ç½®ã€‚ç¼–ç¨‹ç”¨æœ€å°‘çš„æ—‹è½¬æ¬¡æ•°ä½¿å¤šç±³è¯ºéª¨ç‰Œä¸Šä¸‹2è¡Œç‚¹æ•°ä¹‹å·®è¾¾åˆ°æœ€å°ã€‚å¯¹äºå›¾ä¸­çš„ä¾‹å­ï¼Œåªè¦å°†æœ€åä¸€ä¸ªå¤šç±³è¯ºéª¨ç‰Œæ—‹è½¬180Â°ï¼Œå¯ä½¿ä¸Šä¸‹2è¡Œç‚¹æ•°ä¹‹å·®ä¸º0ã€‚

**æ€æƒ³**

$f[i][j]$è¡¨ç¤ºå‰iä¸ªç‰Œï¼Œä½¿ä¸Š-ä¸‹çš„å·®ä¸ºjæ—¶çš„æœ€å°ç¿»è½¬æ¬¡æ•°ã€‚

$f[i][j]=min\{f[i-1][j-(a_ä¸Š-a_ä¸‹)], f[i-1][j-(a_ä¸‹-a_ä¸Š)]+1 \}$



#### Bitsetä¼˜åŒ–èƒŒåŒ…

- ä¸€å…±æœ‰nä¸ªæ•°ï¼Œç¬¬iä¸ªæ•°æ˜¯$x_i$
- $x_i$å¯ä»¥å–$[l_i, r_i]$ä¸­ä»»æ„ä¸€ä¸ªå€¼
- è®¾$S=\sum x_i^2$ï¼Œæ±‚Sçš„ç§ç±»æ•°ã€‚

**NC 16655 [NOIP2005] è¿‡æ²³**

**æ€æƒ³**

ä¸€èˆ¬æƒ³æ³•

- $f[i]$è¡¨ç¤ºé’è›™è¦åˆ°ç¬¬iè¿™ä¸ªä½ç½®æ‰€éœ€è¦è¸©è¿‡çš„æœ€å°çš„çŸ³å­æ•°é‡ã€‚
- $f[i] = max(f[i-k])+(shizi[i]==1),\ S \le k \le T$

ä½†æ˜¯Lçš„èŒƒå›´è¿‡å¤§ï¼Œæ—¶é—´å’Œç©ºé—´å¤æ‚åº¦å‡ä¸å…è®¸ã€‚è§‚å¯ŸçŸ³å­æ•°é‡çš„èŒƒå›´ï¼Œæœ€å¤§æ‰100ã€‚

æ­¤æ—¶ç”¨åˆ°ä¸€ä¸ªå®šç†

![img](https://te4p0t.github.io/assets/images/typora-user-images/202204262301672.png)

è‹¥p1å’Œp2äº’ç´ ä»»æ„å¤§äº$p_1*p_2$çš„æ•°éƒ½å¯ä»¥ç”±$xp_1+yp_2$ç»„æˆï¼Œä¸”xï¼Œyå‡å¤§äº0ã€‚

åˆSå’ŒTæœ€å¤§ä¸º10ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯¹çŸ³å­è¿›è¡Œå¤„ç†ï¼Œå½“ç›¸é‚»ä¸¤çŸ³å­çš„è·ç¦»å¤§äº100æ—¶ï¼Œå°†å®ƒæ”¹ä¸º100ã€‚é‚£ä¹ˆå¯æå¤§é™ä½æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦ã€‚(ä¸ä¸€å®š100ï¼Œå¯å†å¼€å¤§)

#### CF505C Mr. Kitayuta, the Treasure Hunter

- ä¸€å…±æœ‰30001ä¸ªå²›å±¿ï¼Œä¸‹æ ‡ä¸º0åˆ°30000ï¼Œæœ‰äº›å²›å±¿è—æœ‰å®è—ã€‚ä½ ä»0å¾€ä¸‹æ ‡å¤§çš„æ–¹å‘è·³ï¼Œç¬¬ä¸€ æ­¥è·³çš„è·ç¦»ä¸ºdã€‚å¦‚æœä¸Šä¸€æ­¥è·³çš„è·ç¦»ä¸ºlï¼Œè¿™ä¸€æ­¥å°±å¯ä»¥è·³l-1æˆ–l+1ï¼ˆè·ç¦»å¿…é¡»å¤§äº0ï¼‰é—®æœ€å¤šæ‹¿åˆ°å¤šå°‘å®è—ã€‚

**æ€æƒ³**

$f[i][j]$è¡¨ç¤ºåˆ°iä½ç½®ï¼Œä¸Šä¸€æ­¥è°ƒäº†jé•¿åº¦ï¼Œæ‰€èƒ½å¾—åˆ°çš„å®è—æ•°é‡çš„é¢æœ€å¤§å€¼ã€‚

$f[i][j] = max\{f[i-j][j-1], f[i-j][j+1] \}+baozang[i]$

è¿™æ ·çš„è¯iå’Œjçš„èŒƒå›´éƒ½æ˜¯30000ã€‚æ•°ç»„å¼€ä¸ä¸‹ã€‚

ä½†æ˜¯æˆ‘ä»¬è€ƒè™‘é¢˜ç›®ä¸­é™åˆ¶æ­¥æ•°çš„è§„åˆ™ï¼Œæ¯ä¸€æ¬¡çš„æ­¥æ•°åªæœ‰å¯èƒ½æ˜¯ä¸Šä¸€æ¬¡æ­¥æ•°åŠ å‡1ã€‚

å‡è®¾ä»1å¼€å§‹ï¼Œæ¯æ¬¡åŠ 1ï¼Œé‚£ä¹ˆæœ€å¤šåŠ åˆ°300å°±ä¼šå¤§äºå²›å±¿çš„èŒƒå›´ã€‚æ‰€ä»¥è¯´jç›¸å¯¹è·ç¦»åˆå§‹å€¼çš„æµ®åŠ¨ä¸ä¼šè¶…è¿‡æ­£è´Ÿ300ï¼Œé‚£ä¹ˆjå¯ä»¥æ”¹ä¸ºä¸åˆå§‹è·ç¦»ç›¸å¯¹è·ç¦»çš„å€¼ã€‚è¿™æ ·å°±å¯ä»¥é™ä½ç©ºé—´å’Œæ—¶é—´å¤æ‚åº¦ã€‚

#### Codeforces 510D Fox And Jumping

- ç»™å®šNä¸ªä¸åŒçš„æ•°ï¼Œå–ç¬¬iä¸ªæ•°çš„ä»£ä»·ä¸ºc\[i\]ï¼Œæ±‚å–å‡ºè‹¥å¹²ä¸ªæ•°ä½¿å¾—å…¶æœ€å¤§å…¬çº¦æ•°ä¸º1çš„æœ€å°ä»£ä»·
- $1\le n\le 300$
- $l[i]\le10^9$

**æƒ³æ³•**

$f[i][j]$è¡¨ç¤ºå‰iä¸ªæ•°ï¼Œæœ€å¤§å…¬çº¦æ•°ä¸ºjçš„æœ€å°ä»£ä»·

$f[i][j] = min\{f[i-1][j], f[i-1][k]\},\ gcd(k, l[i])==j$

å› ä¸ºæ•°çš„èŒƒå›´å¾ˆå¤§ï¼Œç©ºé—´å¤æ‚åº¦å¤ªå¤§ã€‚

ä½†æ˜¯åœ¨dpçš„è¿‡ç¨‹ä¸­ï¼Œæœ€å¤§å…¬çº¦æ•°çš„ä¸ªæ•°åº”è¯¥æ˜¯å¾ˆå°çš„ã€‚

ç”¨Mapåšä¸€ä¸ªæ˜ å°„ï¼Œä»è€Œé™ä½ç¬¬äºŒç»´çš„èŒƒå›´ã€‚
